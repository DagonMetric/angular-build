{"version":3,"file":"webpack-build-common.js","sourceRoot":"","sources":["../src/webpack-build-common.ts"],"names":[],"mappings":"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","sourcesContent":["// see: https://webpack.js.org/configuration/\r\n// Ref: https://github.com/AngularClass/angular2-webpack-starter\r\n// Ref: https://github.com/MarkPieszak/aspnetcore-angular2-universal\r\n// Ref: https://github.com/aspnet/JavaScriptServices/tree/dev/templates/Angular2Spa\r\n// Ref: https://github.com/angular/angular-cli\r\n\r\nimport * as path from 'path';\r\nimport * as fs from 'fs';\r\n\r\n// ReSharper disable InconsistentNaming\r\nconst CommonsChunkPlugin = require('webpack/lib/optimize/CommonsChunkPlugin');\r\nconst DefinePlugin = require('webpack/lib/DefinePlugin');\r\nconst DllPlugin = require('webpack/lib/DllPlugin');\r\nconst DllReferencePlugin = require('webpack/lib/DllReferencePlugin');\r\nconst IgnorePlugin = require('webpack/lib/IgnorePlugin');\r\nconst LoaderOptionsPlugin = require('webpack/lib/LoaderOptionsPlugin');\r\nconst NamedModulesPlugin = require('webpack/lib/NamedModulesPlugin');\r\nconst NormalModuleReplacementPlugin = require('webpack/lib/NormalModuleReplacementPlugin');\r\nconst ProgressPlugin = require('webpack/lib/ProgressPlugin');\r\nconst ProvidePlugin = require('webpack/lib/ProvidePlugin');\r\nconst UglifyJsPlugin = require('webpack/lib/optimize/UglifyJsPlugin');\r\n\r\nconst autoprefixer = require('autoprefixer');\r\nconst postcssDiscardComments = require('postcss-discard-comments');\r\nconst ExtractTextPlugin = require('extract-text-webpack-plugin');\r\nconst CompressionPlugin = require('compression-webpack-plugin');\r\nconst HtmlWebpackPlugin = require('html-webpack-plugin');\r\nconst AssetsPlugin = require('assets-webpack-plugin');\r\nvar StatsPlugin = require('stats-webpack-plugin');\r\n//const ScriptExtHtmlWebpackPlugin = require('script-ext-html-webpack-plugin');\r\nconst WebpackMd5Hash = require('webpack-md5-hash');\r\nconst CopyWebpackPlugin = require('copy-webpack-plugin');\r\n// ReSharper restore InconsistentNaming\r\n\r\n// Internal plugins\r\n//import { ResolvePublicPathHtmlWebpackPlugin } from './plugins/resolve-public-path-html-webpack-plugin';\r\nimport { IconWebpackPlugin, IconPluginOptions } from './plugins/icon-webpack-plugin';\r\nimport { SuppressEntryChunksWebpackPlugin } from './plugins/suppress-entry-chunks-webpack-plugin';\r\nimport { CustomizeAssetsHtmlWebpackPlugin } from './plugins/customize-assets-html-webpack-plugin';\r\n\r\n//import { GlobCopyWebpackPlugin } from './plugins/glob-copy-webpack-plugin';\r\n\r\nimport { AppConfig, BuildOptions, DllEntry, HtmlInjectOptions, ReplacementModuleEntry } from './models';\r\nimport {\r\n  readJsonSync, parseDllEntryValues, extraEntryParser, makeCssLoaders, packageChunkSort, tryBuildDll, isDevelopmentBuild, isDllBuildFromNpmEvent, isWebpackDevServer\r\n  } from './utils';\r\n\r\nconst defaultBuildOption : BuildOptions = {\r\n  copyAssetsOnDllBuild: true,\r\n  generateIconssOnDllBuild: true\r\n};\r\n\r\n// js, json, html, css(s) and fonts\r\nexport function getWebpackCommonConfig(projectRoot: string, appConfig: AppConfig, buildOptions?: BuildOptions) {\r\n  projectRoot = projectRoot || process.cwd();\r\n  buildOptions = Object.assign(defaultBuildOption, buildOptions || {});\r\n  buildOptions.debug = typeof buildOptions.debug === 'undefined' ? isDevelopmentBuild() : buildOptions.debug;\r\n  buildOptions.dll = typeof buildOptions.dll === 'undefined' ? isDllBuildFromNpmEvent() : buildOptions.dll;\r\n\r\n  // Validations\r\n  if (typeof appConfig !== 'object') {\r\n    throw new Error(`Invalid 'appConfig'.`);\r\n  }\r\n\r\n  if (!appConfig.root) {\r\n    throw new Error(`'appConfig.root' value is required.`);\r\n  }\r\n  if (!appConfig.outDir) {\r\n    throw new Error(`'appConfig.outDir' value is required.`);\r\n  }\r\n  if (!buildOptions.dll && !appConfig.main) {\r\n    throw new Error(`'appConfig.main' value is required.`);\r\n  }\r\n  if (buildOptions.dll && !appConfig.dlls) {\r\n    throw new Error(`'appConfig.dlls' value is required.`);\r\n  }\r\n\r\n  if (buildOptions.dll && appConfig.skipOnDllBuild) {\r\n    return null;\r\n  }\r\n\r\n  // Variables\r\n  const appRoot = path.resolve(projectRoot, appConfig.root);\r\n  const nodeModulesPath = path.resolve(projectRoot, 'node_modules');\r\n\r\n  let entryPoints: { [key: string]: string[] } = {};\r\n  let suppressPlugins: any[] = [];\r\n  let extraRules: any[] = [];\r\n  let lazyChunks: string[] = [];\r\n\r\n  const envLong = buildOptions.debug ? 'development' : 'production';\r\n  const envShort = buildOptions.debug ? 'dev' : 'prod';\r\n  const metadata = {\r\n    'ENV': JSON.stringify(envLong),\r\n    'process.env': {\r\n      ENV: JSON.stringify(envLong),\r\n      NODE_ENV: JSON.stringify(process.env.NODE_ENV)\r\n    }\r\n  };\r\n\r\n  // Set defaults\r\n  //\r\n  appConfig.scripts = appConfig.scripts || [];\r\n  appConfig.styles = appConfig.styles || [];\r\n  appConfig.dllEntryChunkName = appConfig.dllEntryChunkName || 'vendor';\r\n  if (appConfig.publicPath || appConfig.publicPath === '') {\r\n    appConfig.publicPath = /\\/$/.test(appConfig.publicPath) ? appConfig.publicPath : appConfig.publicPath + '/';\r\n  }\r\n  appConfig.target = appConfig.target || 'web';\r\n\r\n  let polyfills: string[] = [];\r\n  let dllVendors: string[] = [];\r\n  if (appConfig.dlls &&\r\n  (buildOptions.dll || appConfig.importPolyfillsToMain ||\r\n    (buildOptions.debug && appConfig.referenceDllOnDevelopment) ||\r\n      (!buildOptions.debug && appConfig.referenceDllOnProduction))) {\r\n    (<any[]>appConfig.dlls).map((e: string|DllEntry) => {\r\n      if (typeof e === 'string') {\r\n        return {\r\n          entry: e\r\n        };\r\n      }\r\n      return e || {};\r\n    }).filter((e: DllEntry) =>\r\n        // entry\r\n        e.entry &&\r\n        e.entry.length > 0 &&\r\n        // targets\r\n        (!e.targets || e.targets.length === 0 || e.targets.indexOf(appConfig.target) > -1) &&\r\n        // env\r\n        (!e.env || e.env === envShort || e.env === envLong))\r\n      .forEach((dllEntryObj: DllEntry) => {\r\n        if (dllEntryObj.isPolyfills || (typeof dllEntryObj.entry === 'string' && dllEntryObj.entry.match(/polyfill/i)) || (Array.isArray(dllEntryObj.entry) && dllEntryObj.entry[0].match(/polyfill/i)) ) {\r\n          polyfills.push(...parseDllEntryValues(appRoot, dllEntryObj.entry, envLong));\r\n        } else {\r\n          dllVendors.push(...parseDllEntryValues(appRoot, dllEntryObj.entry, envLong));\r\n        }\r\n      });\r\n  }\r\n\r\n  const jsSourceMapExcludes = [nodeModulesPath];\r\n\r\n  // Try dlls\r\n  //\r\n  if (((buildOptions.debug && appConfig.referenceDllOnDevelopment) ||\r\n      (!buildOptions.debug && appConfig.referenceDllOnProduction)) &&\r\n    appConfig.tryBuildDll &&\r\n    !buildOptions.dll) {\r\n    const dllManifestFiles: string[] = [\r\n      path.resolve(projectRoot, appConfig.outDir, `${appConfig.dllEntryChunkName}-manifest.json`)\r\n    ];\r\n    tryBuildDll(dllManifestFiles,\r\n      buildOptions.debug,\r\n      projectRoot,\r\n      appConfig.tryBuildDllCommand,\r\n      appConfig.tryBuildDllCommandArgs);\r\n  }\r\n\r\n  // Global scripts\r\n  //\r\n  if (appConfig.scripts && appConfig.scripts.length > 0 && !buildOptions.dll) {\r\n    // Process global scripts\r\n    if (appConfig.scripts && appConfig.scripts.length > 0) {\r\n      const globalScripts = extraEntryParser(appConfig.scripts, appRoot, 'scripts');\r\n\r\n      // Add entry points and lazy chunks\r\n      globalScripts.forEach(script => {\r\n        if (script.lazy) {\r\n          lazyChunks.push(script.entry);\r\n        }\r\n        entryPoints[script.entry] = (entryPoints[script.entry] || []).concat(script.path);\r\n      });\r\n\r\n      // Load global scripts using script-loader\r\n      extraRules.push({\r\n        include: globalScripts.map((script) => script.path),\r\n        test: /\\.js$/,\r\n        loader: 'script-loader'\r\n      });\r\n    }\r\n  }\r\n\r\n  // Global styles\r\n  //\r\n  if (appConfig.styles && appConfig.styles.length > 0 && !buildOptions.dll) {\r\n    const globalStyles = extraEntryParser(appConfig.styles, appRoot, 'styles');\r\n    let extractedCssEntryPoints: string[] = [];\r\n\r\n    // Add entry points and lazy chunks\r\n    globalStyles.forEach(style => {\r\n      if (style.lazy) {\r\n        lazyChunks.push(style.entry);\r\n      }\r\n\r\n      if (!entryPoints[style.entry]) {\r\n        // Since this entry point doesn't exist yet, it's going to only have\r\n        // extracted css and we can supress the entry point\r\n        extractedCssEntryPoints.push(style.entry);\r\n        entryPoints[style.entry] = (entryPoints[style.entry] || []).concat(style.path);\r\n      } else {\r\n        // Existing entry point, just push the css in\r\n        entryPoints[style.entry].push(style.path);\r\n      }\r\n    });\r\n\r\n    // Create css loaders for component css and for global css\r\n    extraRules.push(...makeCssLoaders(globalStyles.map((style) => style.path)));\r\n\r\n    if (extractedCssEntryPoints.length > 0) {\r\n      // Don't emit the .js entry point for extracted styles\r\n      suppressPlugins.push(new SuppressEntryChunksWebpackPlugin({\r\n        chunks: extractedCssEntryPoints,\r\n        supressPattern: /\\.js$/i,\r\n        assetTagsFilterFunc: (tag: any) => !(tag.tagName === 'script' && tag.attributes.src && tag.attributes.src.match(/\\.css$/i))\r\n\r\n      }));\r\n    }\r\n  }\r\n\r\n  // Non global styles\r\n  //\r\n  if ((!appConfig.styles || appConfig.styles.length === 0) && !buildOptions.dll) {\r\n    // create css loaders for component css\r\n    extraRules.push(...makeCssLoaders());\r\n  }\r\n\r\n  // Build main/dll entry\r\n  //\r\n  if (buildOptions.dll) {\r\n    entryPoints[appConfig.dllEntryChunkName] = polyfills.concat(dllVendors);\r\n  } else {\r\n    const appMain = path.resolve(projectRoot, appConfig.root, appConfig.main);\r\n\r\n    if (appConfig.importPolyfillsToMain) {\r\n      entryPoints['main'] = polyfills.concat([appMain]);\r\n    } else {\r\n      entryPoints['main'] = [appMain];\r\n    }\r\n  }\r\n\r\n  const commonRules: any = [\r\n    // js source map\r\n    {\r\n      enforce: 'pre',\r\n      test: /\\.js$/,\r\n      loader: 'source-map-loader',\r\n      exclude: jsSourceMapExcludes\r\n    },\r\n\r\n    // .json files are now supported without the json-loader, webpack >= 2.2\r\n    {\r\n      test: /\\.json$/,\r\n      loader: 'json-loader'\r\n    },\r\n\r\n    // html\r\n    {\r\n      test: /\\.html$/,\r\n      loader: 'raw-loader',\r\n      exclude: [path.resolve(projectRoot, appConfig.root, appConfig.index || 'index.html')]\r\n    },\r\n\r\n    // font loaders\r\n    {\r\n      test: /\\.(otf|ttf|woff|woff2)(\\?v=\\d+\\.\\d+\\.\\d+)?$/,\r\n      loader: 'url-loader?limit=10000&name=assets/[name].[ext]'\r\n    },\r\n    {\r\n      test: /\\.eot(\\?v=\\d+\\.\\d+\\.\\d+)?$/,\r\n      loader: 'file-loader?name=assets/[name].[ext]'\r\n    },\r\n\r\n    // Image loaders\r\n    {\r\n      test: /\\.(jpg|png|gif)$/,\r\n      loader: 'url-loader?limit=10000&name=assets/[name].[ext]'\r\n    },\r\n    {\r\n      test: /\\.(jpe?g|png|gif|svg)(\\?{0}(?=\\?|$))/,\r\n      use: [\r\n        'file-loader?name=assets/[name].[ext]',\r\n        {\r\n          loader: 'image-webpack-loader',\r\n          options: {\r\n            progressive: true,\r\n            optimizationLevel: 7,\r\n            interlaced: false\r\n          }\r\n        }\r\n      ]\r\n    }\r\n  ].concat(extraRules);\r\n\r\n  const commonPlugins: any = [\r\n    new ExtractTextPlugin({\r\n      filename: ((buildOptions.debug && appConfig.appendHashVersionOnDevelopment) ||\r\n          (!buildOptions.debug && appConfig.appendHashVersionOnProduction))\r\n        ? '[name].[chunkhash].css'\r\n        : '[name].css',\r\n      disable: false,\r\n      allChunks: true\r\n    }),\r\n    new LoaderOptionsPlugin({\r\n      test: /\\.(css|scss|sass|less|styl)$/,\r\n      options: {\r\n        postcss: buildOptions.debug\r\n          ? [autoprefixer()]\r\n          : [\r\n            autoprefixer(),\r\n            postcssDiscardComments\r\n          ],\r\n        cssLoader: { sourceMap: buildOptions.debug ? true : buildOptions.sourcemapOnProduction },\r\n        sassLoader: { sourceMap: buildOptions.debug ? true : buildOptions.sourcemapOnProduction },\r\n        lessLoader: { sourceMap: buildOptions.debug ? true : buildOptions.sourcemapOnProduction },\r\n        stylusLoader: { sourceMap: buildOptions.debug ? true : buildOptions.sourcemapOnProduction },\r\n        // context needed as a workaround https://github.com/jtangelder/sass-loader/issues/285\r\n        context: projectRoot\r\n      }\r\n    })\r\n  ];\r\n\r\n  // ProgressPlugin\r\n  //\r\n  if (buildOptions.progress) {\r\n    commonPlugins.push(new ProgressPlugin());\r\n  }\r\n\r\n  // Copy assets\r\n  //\r\n  let shouldCopyAssets = typeof appConfig.assets !== 'undefined' && Array.isArray(appConfig.assets);\r\n  if (shouldCopyAssets && buildOptions.dll && !buildOptions.copyAssetsOnDllBuild) {\r\n    shouldCopyAssets = false;\r\n  }\r\n  if (shouldCopyAssets && !buildOptions.dll && buildOptions.copyAssetsOnDllBuild && ((buildOptions.debug && appConfig.referenceDllOnDevelopment) ||\r\n    (!buildOptions.debug && appConfig.referenceDllOnProduction))) {\r\n    shouldCopyAssets = false;\r\n  }\r\n  if (shouldCopyAssets) {\r\n\r\n    const assets = appConfig.assets.map((asset: any) => {\r\n      if (typeof asset === 'string') {\r\n        // convert dir patterns to globs\r\n        if (asset.lastIndexOf('*') === -1 && fs.statSync(path.resolve(appRoot, asset)).isDirectory()) {\r\n          asset += '/**/*';\r\n        }\r\n\r\n        return {\r\n          from: {\r\n            glob: asset,\r\n            dot: true\r\n          },\r\n          context: appRoot\r\n        };\r\n      } else if (typeof asset === 'object' && asset.from) {\r\n        if (!asset.context) {\r\n          asset.context = appRoot;\r\n        }\r\n        if (typeof asset.from === 'string') {\r\n          let fromGlob = asset.from;\r\n          if (asset.from.lastIndexOf('*') === -1 && fs.statSync(path.resolve(appRoot, asset.from)).isDirectory()) {\r\n            fromGlob += '/**/*';\r\n          }\r\n\r\n          asset.from = {\r\n            glob: fromGlob,\r\n            dot: true\r\n          };\r\n        }\r\n        return asset;\r\n      } else {\r\n        throw new Error(`Invalid 'assets' value in appConfig.`);\r\n      }\r\n    });\r\n    //commonPlugins.push(new GlobCopyWebpackPlugin({\r\n    //  patterns: assets,\r\n    //  globOptions: { cwd: appRoot, dot: true, ignore: '**/.gitkeep' }\r\n    //}));\r\n    commonPlugins.push(new CopyWebpackPlugin(assets,\r\n    {\r\n      ignore: ['**/.gitkeep']\r\n      //copyUnmodified: false\r\n    }));\r\n\r\n  }\r\n\r\n  // Generate assets\r\n  //\r\n  if ((buildOptions.debug && buildOptions.generateAssetsOnDevelopment) || (!buildOptions.debug && buildOptions.generateAssetsOnProduction)) {\r\n    commonPlugins.push(new AssetsPlugin({\r\n      path: path.resolve(appConfig.outDir),\r\n      filename: buildOptions.dll ? 'webpack.dll.assets.json' : 'webpack.assets.json',\r\n      prettyPrint: true\r\n    }));\r\n  }\r\n\r\n  // Generate stats\r\n  //\r\n  if ((buildOptions.debug && buildOptions.generateStatsOnDevelopment) || (!buildOptions.debug && buildOptions.generateStatsOnProduction)) {\r\n    commonPlugins.push(new StatsPlugin(path.resolve(appConfig.outDir, 'stats.json'),\r\n      {\r\n        chunkModules: true\r\n        //exclude: [/node_modules[\\\\\\/]react/]\r\n      }));\r\n  }\r\n\r\n  // NamedModulesPlugin\r\n  //\r\n  if (buildOptions.useNameModuleOnDevelopment && buildOptions.debug) {\r\n    commonPlugins.push(new NamedModulesPlugin());\r\n  }\r\n\r\n  // Provide plugin\r\n  //\r\n  if (appConfig.provide && typeof appConfig.provide === 'object') {\r\n    commonPlugins.push(\r\n      // NOTE: when adding more properties make sure you include them in custom-typings.d.ts\r\n      new ProvidePlugin(appConfig.provide)\r\n    );\r\n  }\r\n\r\n  // DefinePlugin\r\n  //\r\n  if (metadata && !buildOptions.dll) {\r\n    commonPlugins.push(\r\n      // NOTE: when adding more properties make sure you include them in custom-typings.d.ts\r\n      new DefinePlugin(metadata)\r\n    );\r\n  }\r\n\r\n  // NormalModuleReplacementPlugin\r\n  //\r\n  if (appConfig.environments && appConfig.environments[envShort] && !buildOptions.dll) {\r\n    commonPlugins.push(new NormalModuleReplacementPlugin(\r\n      // This plugin is responsible for swapping the environment files.\r\n      // Since it takes a RegExp as first parameter, we need to escape the path.\r\n      // See https://webpack.github.io/docs/list-of-plugins.html#normalmodulereplacementplugin\r\n      new RegExp(path.resolve(appRoot, appConfig.environments['source'])\r\n        .replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, '\\\\$&')),\r\n      path.resolve(appRoot, appConfig.environments[envShort])\r\n    ));\r\n  }\r\n\r\n  // Html injection\r\n  //\r\n\r\n  // htmlAttributes\r\n  //\r\n  let customTagAttributes: any = null;\r\n  if (appConfig.htmlInjectOptions && (appConfig.htmlInjectOptions.customScriptAttributes || appConfig.htmlInjectOptions.customLinkAttributes)) {\r\n    customTagAttributes = {\r\n      scriptAttributes: appConfig.htmlInjectOptions.customScriptAttributes,\r\n      linkAttributes: appConfig.htmlInjectOptions.customLinkAttributes\r\n    };\r\n\r\n  }\r\n\r\n  // Styles Inject\r\n  const separateStylesOut = appConfig.htmlInjectOptions && appConfig.htmlInjectOptions.stylesInjectOutFileName && entryPoints['styles'] && !buildOptions.dll;\r\n  const stylesHtmlWebpackPluginId = separateStylesOut ? 'StylesHtmlWebpackPlugin' : null;\r\n  if (separateStylesOut) {\r\n    //const seperateOutput = true;\r\n\r\n    commonPlugins.push(new HtmlWebpackPlugin({\r\n      templateContent: ' ',\r\n      filename: path.resolve(projectRoot, appConfig.outDir, appConfig.htmlInjectOptions.stylesInjectOutFileName),\r\n      title: '',\r\n      chunks: ['styles'],\r\n      customAttributes: customTagAttributes,\r\n      inject: true,\r\n      id: stylesHtmlWebpackPluginId\r\n    }));\r\n\r\n    // custom link attributes\r\n    if (customTagAttributes) {\r\n      commonPlugins.push(new CustomizeAssetsHtmlWebpackPlugin({\r\n        targetHtmlWebpackPluginId: stylesHtmlWebpackPluginId,\r\n        customLinkAttributes: customTagAttributes.linkAttributes\r\n      }));\r\n    }\r\n\r\n    // move head assets to body\r\n    if (customTagAttributes) {\r\n      commonPlugins.push(new CustomizeAssetsHtmlWebpackPlugin({\r\n        targetHtmlWebpackPluginId: stylesHtmlWebpackPluginId,\r\n        moveHeadAssetsToBody: true\r\n      }));\r\n    }\r\n  }\r\n\r\n\r\n  // Icons, inject\r\n  //\r\n  let shouldGenerateIcons = typeof appConfig.faviconConfig !== 'undefined' && appConfig.faviconConfig !== null;\r\n  if (shouldGenerateIcons && buildOptions.dll && !buildOptions.generateIconssOnDllBuild) {\r\n    shouldGenerateIcons = false;\r\n  }\r\n  if (shouldGenerateIcons &&\r\n    !buildOptions.dll &&\r\n    buildOptions.generateIconssOnDllBuild &&\r\n    ((buildOptions.debug && appConfig.referenceDllOnDevelopment) ||\r\n      (!buildOptions.debug && appConfig.referenceDllOnProduction))) {\r\n    shouldGenerateIcons = false;\r\n  }\r\n  if (shouldGenerateIcons) {\r\n    let iconConfig: IconPluginOptions = null;\r\n    if (typeof appConfig.faviconConfig === 'object') {\r\n        iconConfig = appConfig.faviconConfig;\r\n    } else if (typeof appConfig.faviconConfig === 'string' && appConfig.faviconConfig.match(/\\.json$/i)) {\r\n        iconConfig = readJsonSync(path.resolve(appRoot, appConfig.faviconConfig));\r\n    }\r\n\r\n    if (!iconConfig || !iconConfig.masterPicture) {\r\n        throw new Error(`Invalid favicon format or configuration. 'masterPicture' is undefined.`);\r\n    }\r\n\r\n    iconConfig.masterPicture = path.resolve(appRoot, iconConfig.masterPicture);\r\n\r\n    if (!iconConfig.iconsPath) {\r\n      iconConfig.iconsPath = ((buildOptions.debug && appConfig.appendHashVersionOnDevelopment) ||\r\n        (!buildOptions.debug && appConfig.appendHashVersionOnProduction))\r\n        ? 'icons-[hash]/'\r\n        : 'icons/';\r\n    }\r\n    if (!iconConfig.statsFilename) {\r\n      iconConfig.statsFilename = ((buildOptions.debug && appConfig.appendHashVersionOnDevelopment) ||\r\n        (!buildOptions.debug && appConfig.appendHashVersionOnProduction))\r\n        ? 'iconstats-[hash].json'\r\n        : 'iconstats.json';\r\n    }\r\n    if (typeof iconConfig.emitStats === 'undefined') {\r\n      iconConfig.emitStats = (buildOptions.debug && buildOptions.generateStatsOnDevelopment) ||\r\n        (!buildOptions.debug && buildOptions.generateStatsOnProduction);\r\n    }\r\n\r\n    let iconsInjectOutFileName = null;\r\n    if (iconConfig['iconsInjectOutFileName']) {\r\n      iconsInjectOutFileName = iconConfig['iconsInjectOutFileName'];\r\n    } else if (appConfig.htmlInjectOptions && appConfig.htmlInjectOptions.iconsInjectOutFileName) {\r\n      iconsInjectOutFileName = appConfig.htmlInjectOptions.iconsInjectOutFileName;\r\n    }\r\n\r\n    let iconHtmlSeparateOut = iconsInjectOutFileName !== null &&\r\n      ((iconsInjectOutFileName !== appConfig.indexOutFileName) ||\r\n      (iconsInjectOutFileName !== appConfig.index));\r\n\r\n    if (typeof iconConfig.inject === 'undefined') {\r\n      if (appConfig.index || appConfig.indexOutFileName || iconHtmlSeparateOut) {\r\n        iconConfig.inject = true;\r\n      } else {\r\n        iconConfig.inject = true;\r\n      }\r\n    }\r\n\r\n    const targetHtmlWebpackPluginId = (iconConfig.inject && iconHtmlSeparateOut)\r\n      ? 'IconsHtmlWebpackPlugin'\r\n      : stylesHtmlWebpackPluginId;\r\n\r\n    let seperateOutput = false;\r\n    // Seperate inject output\r\n    if (iconConfig.inject && iconHtmlSeparateOut) {\r\n      seperateOutput = true;\r\n\r\n      commonPlugins.push(new HtmlWebpackPlugin({\r\n        templateContent: ' ',\r\n        filename: path.resolve(projectRoot, appConfig.outDir, iconsInjectOutFileName),\r\n        chunks: [],\r\n        title: '',\r\n        customAttributes: customTagAttributes,\r\n        inject: true,\r\n        id: targetHtmlWebpackPluginId\r\n      }));\r\n    }\r\n\r\n    iconConfig.targetHtmlWebpackPluginId = targetHtmlWebpackPluginId;\r\n    iconConfig.seperateOutput = seperateOutput;\r\n\r\n    commonPlugins.push(\r\n      new IconWebpackPlugin(iconConfig)\r\n    );\r\n  }\r\n\r\n  // Default inject\r\n  if ((appConfig.index || appConfig.indexOutFileName) && !buildOptions.dll) {\r\n    const defaultHtmlWebpackPluginId = 'DefaultHtmlWebpackPlugin';\r\n    const excludeChunks = lazyChunks;\r\n    if (separateStylesOut) {\r\n      excludeChunks.push('styles');\r\n    }\r\n\r\n    if (appConfig.index && appConfig.index.trim()) {\r\n      commonPlugins.push(new HtmlWebpackPlugin({\r\n        template: path.resolve(appRoot, appConfig.index),\r\n        filename: path.resolve(projectRoot, appConfig.outDir, appConfig.indexOutFileName || appConfig.index),\r\n        chunksSortMode: packageChunkSort(['inline', 'styles', 'scripts', appConfig.dllEntryChunkName , 'main']),\r\n        excludeChunks: excludeChunks,\r\n        title: '',\r\n        isDevServer: isWebpackDevServer(),\r\n        metadata: metadata,\r\n        customAttributes: customTagAttributes,\r\n        id: defaultHtmlWebpackPluginId\r\n        //hot:\r\n        //hash: false,\r\n        //favicon: false,\r\n        //minify: false,\r\n        //cache: true,\r\n        //compile: true,\r\n        //chunks: \"all\",\r\n        //inject: 'body' //'head' || 'body' || true || false\r\n      }));\r\n    } else {\r\n      commonPlugins.push(new HtmlWebpackPlugin({\r\n        templateContent: ' ',\r\n        filename: path.resolve(projectRoot, appConfig.outDir, appConfig.indexOutFileName || appConfig.index),\r\n        chunksSortMode: packageChunkSort(['inline', 'styles', 'scripts', appConfig.dllEntryChunkName, 'main']),\r\n        excludeChunks: excludeChunks,\r\n        title: '',\r\n        customAttributes: customTagAttributes,\r\n        id: defaultHtmlWebpackPluginId,\r\n        inject: true\r\n      }));\r\n\r\n      // move head assets to body\r\n      if (customTagAttributes) {\r\n        commonPlugins.push(new CustomizeAssetsHtmlWebpackPlugin({\r\n          targetHtmlWebpackPluginId: defaultHtmlWebpackPluginId,\r\n          moveHeadAssetsToBody: true\r\n        }));\r\n      }\r\n    }\r\n\r\n    // add dll entry - vendor.js\r\n    if ((buildOptions.debug && appConfig.referenceDllOnDevelopment) ||\r\n      (!buildOptions.debug && appConfig.referenceDllOnProduction)) {\r\n      const dllRefScript = `${appConfig.dllEntryChunkName}.js`;\r\n      commonPlugins.push(new CustomizeAssetsHtmlWebpackPlugin({\r\n        targetHtmlWebpackPluginId: defaultHtmlWebpackPluginId,\r\n        scriptSrcToBodyAssets: [dllRefScript],\r\n        customScriptAttributes: customTagAttributes ? customTagAttributes.scriptAttributes : [],\r\n        addPublicPath: true\r\n      }));\r\n    }\r\n\r\n    // ** Order is import\r\n    // custom script/link attributes\r\n    if (customTagAttributes) {\r\n      commonPlugins.push(new CustomizeAssetsHtmlWebpackPlugin({\r\n        targetHtmlWebpackPluginId: defaultHtmlWebpackPluginId,\r\n        customScriptAttributes: customTagAttributes.scriptAttributes,\r\n        customLinkAttributes: customTagAttributes.linkAttributes\r\n      }));\r\n    }\r\n  }\r\n\r\n  // remove starting slash\r\n  commonPlugins.push(new CustomizeAssetsHtmlWebpackPlugin({\r\n    removeStartingSlash: true\r\n  }));\r\n\r\n  // DllPlugin, DllReferencePlugin or CommonsChunkPlugin\r\n  //\r\n  if (buildOptions.dll) {\r\n    const dllPlugins = [\r\n      new DllPlugin({\r\n        path: path.resolve(projectRoot, appConfig.outDir, `[name]-manifest.json`),\r\n        name: '[name]_[chunkhash]' //'[name]_lib' || [name]_[chunkhash]' || '[name]_[hash]'\r\n      }),\r\n\r\n      // Workaround for https://github.com/stefanpenner/es6-promise/issues/100\r\n      new IgnorePlugin(/^vertx$/)\r\n\r\n      // Workaround for https://github.com/andris9/encoding/issues/16\r\n      //new NormalModuleReplacementPlugin(/\\/iconv-loader$/, require.resolve('node-noop')))\r\n    ];\r\n    commonPlugins.push(...dllPlugins);\r\n\r\n  } else {\r\n    if ((buildOptions.debug && appConfig.referenceDllOnDevelopment) || (!buildOptions.debug && appConfig.referenceDllOnProduction)) {\r\n      if (appConfig.target === 'node') {\r\n        commonPlugins.push(\r\n          new DllReferencePlugin({\r\n            context: projectRoot, // or '.'\r\n            sourceType: 'commonjs2',\r\n            manifest: require(path.resolve(projectRoot, appConfig.outDir, `${appConfig.dllEntryChunkName}-manifest.json`)),\r\n            name: `./${appConfig.dllEntryChunkName}`\r\n          })\r\n        );\r\n      } else {\r\n        commonPlugins.push(\r\n          new DllReferencePlugin({\r\n            context: projectRoot, //'.',\r\n            manifest: require(path.resolve(projectRoot, appConfig.outDir, `${appConfig.dllEntryChunkName}-manifest.json`))\r\n          })\r\n        );\r\n      }\r\n\r\n      commonPlugins.push(new CommonsChunkPlugin({\r\n        minChunks: Infinity,\r\n        name: 'inline'\r\n      }));\r\n\r\n    } else {\r\n      commonPlugins.push(new CommonsChunkPlugin({\r\n        minChunks: Infinity,\r\n        name: 'inline'\r\n      }));\r\n\r\n      // This enables tree shaking of the vendor modules\r\n      commonPlugins.push(new CommonsChunkPlugin({\r\n        name: appConfig.dllEntryChunkName,\r\n        chunks: ['main'],\r\n        minChunks: (module: any) => module.userRequest && module.userRequest.startsWith(nodeModulesPath)\r\n        // Or\r\n        //minChunks: module => /node_modules\\//.test(module.resource)\r\n      }));\r\n    }\r\n  }\r\n\r\n  // Suppress plugins\r\n  commonPlugins.push(...suppressPlugins);\r\n\r\n  // Production plugins\r\n  if (buildOptions.debug === false) {\r\n    const prodPlugins = [\r\n      new WebpackMd5Hash(),\r\n      new LoaderOptionsPlugin({ debug: false, minimize: true }),\r\n      new UglifyJsPlugin({\r\n        beautify: false,\r\n        mangle: {\r\n          screw_ie8: true,\r\n          keep_fnames: true\r\n        },\r\n        compress: {\r\n          screw_ie8: true\r\n        },\r\n        comments: false,\r\n        sourceMap: buildOptions.sourcemapOnProduction\r\n      })\r\n    ];\r\n\r\n    if (appConfig.compressAssetsOnProduction) {\r\n      prodPlugins.push(new CompressionPlugin({\r\n        asset: '[path].gz[query]',\r\n        algorithm: 'gzip',\r\n        test: /\\.js$|\\.html$|\\.css$/,\r\n        threshold: 10240,\r\n        minRatio: 0.8\r\n      }));\r\n    }\r\n\r\n    if (buildOptions.productionReplacementModules && buildOptions.productionReplacementModules.length) {\r\n      buildOptions.productionReplacementModules.forEach((entry: ReplacementModuleEntry) => {\r\n        prodPlugins.push(new NormalModuleReplacementPlugin(\r\n          new RegExp(entry.resourceRegExp, 'i'),\r\n          entry.newResource\r\n        ));\r\n      });\r\n    }\r\n    commonPlugins.push(...prodPlugins);\r\n  }\r\n\r\n  let webpackConfig = {\r\n    target: appConfig.target === 'node' ? 'node' : 'web',\r\n    devtool: buildOptions.debug ? 'source-map' : false, // Or 'cheap-module-source-map'\r\n    resolve: {\r\n      extensions: buildOptions.dll ? ['.js'] : ['.js', '.json'],\r\n      modules: [appRoot, nodeModulesPath]\r\n    },\r\n    context: projectRoot,\r\n    entry: entryPoints,\r\n    output: {\r\n      path: path.resolve(projectRoot, appConfig.outDir),\r\n      publicPath: appConfig.publicPath,\r\n      filename: ((buildOptions.debug && appConfig.appendHashVersionOnDevelopment) ||\r\n        (!buildOptions.debug && appConfig.appendHashVersionOnProduction))\r\n        ? '[name].[chunkhash].js'\r\n        : '[name].js',\r\n      sourceMapFilename: ((buildOptions.debug && appConfig.appendHashVersionOnDevelopment) ||\r\n        (!buildOptions.debug && appConfig.appendHashVersionOnProduction))\r\n        ? '[name].[chunkhash].map'\r\n        : '[name].map',\r\n      chunkFilename: ((buildOptions.debug && appConfig.appendHashVersionOnDevelopment) ||\r\n        (!buildOptions.debug && appConfig.appendHashVersionOnProduction))\r\n        ? '[id].[chunkhash].js'\r\n        : '[id].js',\r\n      libraryTarget: appConfig.target === 'node' ? buildOptions.dll ? 'commonjs2' : 'commonjs' : 'var',\r\n      // For dll only\r\n      // The name of the global variable which the library's\r\n      // require() function will be assigned to\r\n      library: '[name]_[chunkhash]' //'[name]_lib' || '[name]_[hash]'\r\n    },\r\n    module: {\r\n      rules: commonRules\r\n    },\r\n    plugins: commonPlugins,\r\n    // >= version 2.2\r\n    performance: {\r\n        hints: buildOptions.dll ? false : 'warning', // boolean | \"error\" | \"warning\"\r\n        maxAssetSize: 320000, // int (in bytes),\r\n        maxEntrypointSize: 400000, // int (in bytes)\r\n        assetFilter(assetFilename) {\r\n            // Function predicate that provides asset filenames\r\n            return assetFilename.endsWith('.css') || assetFilename.endsWith('.js');\r\n        }\r\n    },\r\n    node: {\r\n      fs: 'empty',\r\n      global: true,\r\n      crypto: 'empty',\r\n      tls: 'empty',\r\n      net: 'empty',\r\n      process: true,\r\n      module: false,\r\n      clearImmediate: false,\r\n      setImmediate: false\r\n    }\r\n    // See: https://webpack.js.org/configuration/stats/\r\n    //stats: {\r\n    //    colors: true,\r\n    //    errors: true,\r\n    //    errorDetails: true,\r\n    //    reasons: true,\r\n    //    timings: true,\r\n    //    assets: true,\r\n    //    version: true,\r\n    //    warnings: true,\r\n    //    // Add the source code of modules\r\n    //    source: true,\r\n    //    // Add information about cached (not built) modules\r\n    //    children: true,\r\n    //    publicPath: false,\r\n    //    //modules: false,\r\n    //    hash: false,\r\n    //    // make sure 'chunks' is false or it will add 5-10 seconds to your build and incremental build time, due to excessive output.\r\n    //    chunks: false\r\n    //    // Add built modules information to chunk information\r\n    //    //chunkModules: false,\r\n    //    // Add the origins of chunks and chunk merging info\r\n    //    //chunkOrigins: false\r\n    //}\r\n  };\r\n\r\n  return webpackConfig;\r\n\r\n}\r\n\r\n"]}