{"version":3,"file":"utils.js","sourceRoot":"","sources":["../src/utils.ts"],"names":[],"mappings":"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","sourcesContent":["import * as path from 'path';\r\nimport * as fs from 'fs';\r\n\r\n// ReSharper disable once InconsistentNaming\r\nconst ExtractTextPlugin = require('extract-text-webpack-plugin');\r\n\r\nimport { ExtraEntry } from './models';\r\n\r\n// create array of css loaders\r\n// Ref: https://github.com/angular/angular-cli\r\nexport function makeCssLoaders(stylePaths: string[] = []) {\r\n  const baseRules = [\r\n    { test: /\\.css$/, loaders: [] },\r\n    { test: /\\.scss$|\\.sass$/, loaders: ['sass-loader'] },\r\n    { test: /\\.less$/, loaders: ['less-loader'] },\r\n    { test: /\\.styl$/, loaders: ['stylus-loader'] }\r\n  ];\r\n\r\n  const commonLoaders = ['postcss-loader'];\r\n\r\n  // load component css as raw strings\r\n  const cssLoaders: any = baseRules.map(({test, loaders}) => ({\r\n    exclude: stylePaths, test, loaders: ['raw-loader'].concat(commonLoaders).concat(loaders)\r\n  }));\r\n\r\n  if (stylePaths && stylePaths.length > 0) {\r\n    // load global css as css files\r\n    cssLoaders.push(...baseRules.map(({test, loaders}) => ({\r\n      include: stylePaths, test, loaders: ExtractTextPlugin.extract({\r\n        remove: false,\r\n        loader: ['css-loader'].concat(commonLoaders).concat(loaders),\r\n        fallbackLoader: 'style-loader'\r\n      })\r\n    })));\r\n  }\r\n\r\n  return cssLoaders;\r\n}\r\n\r\n// convert all extra entries into the object representation, fill in defaults\r\n// Ref: https://github.com/angular/angular-cli\r\nexport function extraEntryParser(\r\n  extraEntries: (string | ExtraEntry)[],\r\n  appRoot: string,\r\n  defaultEntry: string\r\n): ExtraEntry[] {\r\n  if (!extraEntries || !extraEntries.length) {\r\n    return [];\r\n  }\r\n  return extraEntries\r\n    .map((extraEntry: string | ExtraEntry) =>\r\n      typeof extraEntry === 'string' ? { input: extraEntry } : extraEntry)\r\n    .map((extraEntry: ExtraEntry) => {\r\n      extraEntry.path = path.resolve(appRoot, extraEntry.input);\r\n      if (extraEntry.output) {\r\n        extraEntry.entry = extraEntry.output.replace(/\\.(js|css)$/i, '');\r\n      } else if (extraEntry.lazy) {\r\n        extraEntry.entry = extraEntry.input.replace(/\\.(js|css|scss|sass|less|styl)$/i, '');\r\n      } else {\r\n        extraEntry.entry = defaultEntry;\r\n      }\r\n      return extraEntry;\r\n    });\r\n}\r\n\r\nexport function parseDllEntryValues(baseDir: string, entryValue: any, env: string): string[] {\r\n  const dllList: string[] = [];\r\n\r\n  if (Array.isArray(entryValue)) {\r\n    entryValue.forEach((value) => {\r\n      const list = parseDllEntryValue(baseDir, value, env);\r\n      dllList.push(...list);\r\n    });\r\n  } else if (typeof entryValue === 'string' && entryValue.length) {\r\n    let list = parseDllEntryValue(baseDir, entryValue, env);\r\n    dllList.push(...list);\r\n  }\r\n  return dllList;\r\n}\r\n\r\nfunction parseDllEntryValue(baseDir: string, entryValue: string, env: string): string[] {\r\n  const dllPath = path.resolve(baseDir, entryValue);\r\n  if (fs.existsSync(dllPath)) {\r\n    if (dllPath.match(/\\.json$/)) {\r\n      const dataArray = readJsonSync(dllPath);\r\n      if (Array.isArray(dataArray)) {\r\n        return dataArray;\r\n      } else {\r\n        throw new Error(`Invalid 'entry' value in dllEntry, file: ${dllPath}.`);\r\n      }\r\n    }\r\n    if (dllPath.match(/\\.(js|ts)$/)) {\r\n      try {\r\n        const data = require(dllPath);\r\n\r\n        if (data && data.default && typeof data.default === 'function') {\r\n          //return data.default(env);\r\n          const dataArray = data.default(env);\r\n          if (Array.isArray(dataArray)) {\r\n            return dataArray;\r\n          } else {\r\n            throw new Error(`Invalid 'entry' value in dllEntry, file: ${dllPath}.`);\r\n          }\r\n        }\r\n        if (data && typeof data === 'function') {\r\n          const dataArray = data(env);\r\n          if (Array.isArray(dataArray)) {\r\n            return dataArray;\r\n          } else {\r\n            throw new Error(`Invalid 'entry' value in dllEntry, file: ${dllPath}.`);\r\n          }\r\n        }\r\n\r\n        if (Array.isArray(data)) {\r\n          return data;\r\n        } else {\r\n          return [entryValue];\r\n        }\r\n      } catch (ex) {\r\n        return [entryValue];\r\n      }\r\n    }\r\n\r\n  } else {\r\n    return [entryValue];\r\n  }\r\n  throw new Error(`Invalid 'entry' value in dllEntry.`);\r\n}\r\n\r\n// Ref: https://github.com/angular/angular-cli\r\nexport function packageChunkSort(packages: string[]) {\r\n  return (left: any, right: any) => {\r\n    const leftIndex = packages.indexOf(left.names[0]);\r\n    const rightindex = packages.indexOf(right.names[0]);\r\n\r\n    if (leftIndex < 0 || rightindex < 0) {\r\n      // Unknown packages are loaded last\r\n      return 1;\r\n    }\r\n\r\n    if (leftIndex > rightindex) {\r\n      return 1;\r\n    }\r\n\r\n    return -1;\r\n  };\r\n}\r\n\r\nexport function findNpmScriptCommandName(baseDir: string, keyFilter: RegExp, valueFilter?: RegExp): string {\r\n  let pkgConfigPath = path.resolve(baseDir, 'package.json');\r\n  if (!fs.existsSync(pkgConfigPath)) {\r\n    pkgConfigPath = path.resolve(baseDir, '../package.json');\r\n  }\r\n  if (!fs.existsSync(pkgConfigPath)) {\r\n    return null;\r\n  }\r\n\r\n  const pkgConfig = readJsonSync(pkgConfigPath);\r\n  if (!pkgConfig.scripts) {\r\n    return null;\r\n  }\r\n  const foundKey = Object.keys(pkgConfig.scripts).find((key: string) => {\r\n    return keyFilter.test(key) && (!valueFilter || (valueFilter && valueFilter.test(pkgConfig.scripts[key])));\r\n  });\r\n\r\n  return foundKey;\r\n}\r\n\r\nexport function tryBuildDll(manifestFiles: string[], debug: boolean, baseDir: string, command?: string, commandArgs?: string[]): void {\r\n  try {\r\n    manifestFiles\r\n      .forEach((manifestFile: string) => {\r\n        fs.accessSync(manifestFile);\r\n      });\r\n  } catch (err) {\r\n\r\n    if (!command) {\r\n      const npmScriptName = findNpmScriptCommandName(baseDir, /(dll([:\\-]build)?)|((build[:\\-])?dll)/i, /\\s*webpack\\s*/i);\r\n      if (npmScriptName) {\r\n        // 'npm', ['run', 'build:dll']\r\n        command = 'npm';\r\n        commandArgs = ['run', npmScriptName];\r\n      } else {\r\n        let webpackConfigFile = null;\r\n        if (fs.existsSync(path.resolve(baseDir, 'webpack.config.dll.js'))) {\r\n          webpackConfigFile = 'webpack.config.dll.js';\r\n        } else if (fs.existsSync(path.resolve(baseDir, 'webpack.dll.js'))) {\r\n          webpackConfigFile = 'webpack.dll.js';\r\n        } else if (fs.existsSync(path.resolve(baseDir, 'webpackfile.dll.js'))) {\r\n          webpackConfigFile = 'webpackfile.dll.js';\r\n        } else if (fs.existsSync(path.resolve(baseDir, 'webpack.config.vendor.js'))) {\r\n          webpackConfigFile = 'webpack.config.vendor.js';\r\n        } else if (fs.existsSync(path.resolve(baseDir, 'webpack.vendor.js'))) {\r\n          webpackConfigFile = 'webpack.vendor.js';\r\n        } else if (fs.existsSync(path.resolve(baseDir, 'webpackfile.vendor.js'))) {\r\n          webpackConfigFile = 'webpackfile.vendor.js';\r\n        } else if (fs.existsSync(path.resolve(baseDir, 'webpack.config.dll.ts'))) {\r\n          webpackConfigFile = 'webpack.config.dll.ts';\r\n        } else if (fs.existsSync(path.resolve(baseDir, 'webpack.dll.ts'))) {\r\n          webpackConfigFile = 'webpack.dll.ts';\r\n        } else if (fs.existsSync(path.resolve(baseDir, 'webpackfile.dll.ts'))) {\r\n          webpackConfigFile = 'webpackfile.dll.ts';\r\n        } else if (fs.existsSync(path.resolve(baseDir, 'webpack.config.vendor.ts'))) {\r\n          webpackConfigFile = 'webpack.config.vendor.ts';\r\n        } else if (fs.existsSync(path.resolve(baseDir, 'webpack.vendor.ts'))) {\r\n          webpackConfigFile = 'webpack.vendor.ts';\r\n        } else if (fs.existsSync(path.resolve(baseDir, 'webpackfile.vendor.ts'))) {\r\n          webpackConfigFile = 'webpackfile.vendor.ts';\r\n        }\r\n\r\n        if (webpackConfigFile) {\r\n          command = 'node';\r\n          const env = debug ? '--env.dev' : '--env.prod';\r\n          commandArgs = ['node_modules/webpack/bin/webpack.js', '--config', webpackConfigFile, env];\r\n        }\r\n\r\n      }\r\n    }\r\n\r\n    tryToSpawn(command, commandArgs);\r\n  }\r\n}\r\n\r\nexport function tryToSpawn(command: string, commandArgs: string[]) {\r\n  const spawn: any = require('cross-spawn');\r\n  spawn.sync(command, commandArgs, { stdio: 'inherit' });\r\n  return;\r\n}\r\n\r\n// Ref: https://github.com/AngularClass/angular2-webpack-starter\r\nexport function isWebpackDevServer(): boolean {\r\n  return process.argv[1] && !!(/webpack-dev-server/.exec(process.argv[1]));\r\n}\r\n\r\nexport function isDevelopmentBuild(): boolean {\r\n  return !(\r\n    (process.env.ASPNETCORE_ENVIRONMENT && process.env.ASPNETCORE_ENVIRONMENT.toLowerCase() === 'production') ||\r\n    process.argv.indexOf('--env.prod') > -1 ||\r\n    process.argv.indexOf('--env.production') > -1 ||\r\n    process.argv.indexOf('--env.Production') > -1 ||\r\n    (process.env.NODE_ENV && (process.env.NODE_ENV.toLowerCase() === 'prod' ||\r\n      process.env.NODE_ENV.toLowerCase() === 'production')));\r\n}\r\n\r\nexport function isDllBuildFromNpmEvent(eventName?: string): boolean {\r\n  const lcEvent = process.env.npm_lifecycle_event;\r\n  if (!lcEvent) {\r\n    return false;\r\n  }\r\n\r\n  if (eventName) {\r\n    return lcEvent.includes(eventName);\r\n  } else {\r\n    return lcEvent.includes('build:dll') ||\r\n      lcEvent.includes('dll:build') ||\r\n      lcEvent.includes(':dll') ||\r\n      lcEvent === 'dll';\r\n  }\r\n}\r\n\r\nexport function isAoTBuildFromNpmEvent(eventName?: string): boolean {\r\n  const lcEvent = process.env.npm_lifecycle_event;\r\n  if (!lcEvent) {\r\n    return false;\r\n  }\r\n\r\n  if (eventName) {\r\n    return lcEvent.includes(eventName);\r\n  } else {\r\n    return lcEvent.includes('build:aot') ||\r\n      lcEvent.includes('aot:build') ||\r\n      lcEvent.includes(':aot') ||\r\n      lcEvent === 'aot';\r\n  }\r\n}\r\n\r\nexport function stripComments(content: string): string {\r\n  /**\r\n   * First capturing group matches double quoted string\r\n   * Second matches single quotes string\r\n   * Third matches block comments\r\n   * Fourth matches line comments\r\n   */\r\n  const regexp = /(\"(?:[^\\\\\\\"]*(?:\\\\.)?)*\")|('(?:[^\\\\\\']*(?:\\\\.)?)*')|(\\/\\*(?:\\r?\\n|.)*?\\*\\/)|(\\/{2,}.*?(?:(?:\\r?\\n)|$))/g;\r\n  const result = content.replace(regexp, (match, m1, m2, m3, m4) => {\r\n    // Only one of m1, m2, m3, m4 matches\r\n    if (m3) {\r\n      // A block comment. Replace with nothing\r\n      return \"\";\r\n    } else if (m4) {\r\n      // A line comment. If it ends in \\r?\\n then keep it.\r\n      let length = m4.length;\r\n      if (length > 2 && m4[length - 1] === \"\\n\") {\r\n        return m4[length - 2] === \"\\r\" ? \"\\r\\n\" : \"\\n\";\r\n      } else {\r\n        return \"\";\r\n      }\r\n    } else {\r\n      // We match a string\r\n      return match;\r\n    }\r\n  });\r\n  return result;\r\n};\r\n\r\nexport function readJsonSync(filePath: string) {\r\n  const context = stripComments(fs.readFileSync(filePath).toString().replace(/^\\uFEFF/, ''));\r\n  return JSON.parse(context);\r\n}\r\n"]}