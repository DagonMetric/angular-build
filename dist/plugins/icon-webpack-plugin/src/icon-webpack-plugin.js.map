{"version":3,"file":"icon-webpack-plugin.js","sourceRoot":"","sources":["../../../../src/plugins/icon-webpack-plugin/src/icon-webpack-plugin.ts"],"names":[],"mappings":"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","sourcesContent":["/**\r\n * Credits\r\n  * jantimon/favicons-webpack-plugin - https://github.com/jantimon/favicons-webpack-plugin\r\n *\r\n * Ref:\r\n * haydenbleasel/favicons - https://github.com/haydenbleasel/favicons\r\n *webpack/docs - https://github.com/webpack/docs/wiki/plugins\r\n */\r\n// Ref: webpack/docs - https://github.com/webpack/docs/wiki/plugins\r\n// Ref: webpack/docs - https://github.com/webpack/docs/wiki/how-to-write-a-plugin\r\n// Ref:ampedandwired/html-webpack-plugin - https://github.com/ampedandwired/html-webpack-plugin\r\n\r\nimport * as path from 'path';\r\nimport * as fs from 'fs';\r\n\r\n// ReSharper disable InconsistentNaming\r\nconst NodeTemplatePlugin = require('webpack/lib/node/NodeTemplatePlugin');\r\nconst NodeTargetPlugin = require('webpack/lib/node/NodeTargetPlugin');\r\nconst LoaderTargetPlugin = require('webpack/lib/LoaderTargetPlugin');\r\nconst SingleEntryPlugin = require('webpack/lib/SingleEntryPlugin');\r\n// ReSharper restore InconsistentNaming\r\n\r\nimport { IconPluginOptions, IconLoaderOptions} from './models';\r\nimport { readJsonSync } from './utils';\r\n\r\n// ReSharper disable once InconsistentNaming\r\nexport interface IconStatsResult {\r\n  outputName: string;\r\n  stats: {\r\n    html: string[];\r\n  };\r\n}\r\n\r\n// ReSharper disable once InconsistentNaming\r\nexport interface HtmlPluginArgs\r\n{\r\n  html?: string;\r\n  assets?: {\r\n    publicPath?: string;\r\n    chunks?: {};\r\n    js?: string[];\r\n    css?: string[];\r\n  },\r\n  plugin?: {\r\n    options?: {\r\n      template?: string;\r\n      filename?: string;\r\n      hash?: boolean;\r\n      inject?: boolean|string;\r\n      compile?: boolean;\r\n      favicon?: string;\r\n      minify?: boolean | {}; // See: https://github.com/kangax/html-minifier#options-quick-reference\r\n      cache?: boolean;\r\n      showErrors?: boolean;\r\n      chunks?: string|string[];\r\n      excludeChunks?: string[];\r\n      title?: string;\r\n      xhtml?: boolean;\r\n\r\n      // custom added\r\n      id?: string;\r\n      customAttributes?: any;\r\n      //faviconStats?: any;\r\n    };\r\n    childCompilerHash?: string;\r\n    childCompilationOutputName?: string;\r\n    assetJson?: string;\r\n  },\r\n  outputName?: string;\r\n}\r\n\r\nexport class IconWebpackPlugin {\r\n\r\n  private readonly  defaultPluginOptions: IconPluginOptions = {\r\n    masterPicture: null,\r\n    iconsPath: 'icons-[hash]/',\r\n    emitStats: false,\r\n    statsFilename: 'iconstats.json',\r\n    persistentCache: true,\r\n    inject: true,\r\n    online: false,\r\n    preferOnline: false,\r\n    settings: {\r\n      scalingAlgorithm: 'Mitchell',\r\n      errorOnImageTooSmall: false\r\n    }\r\n  };\r\n\r\n  private readonly rawOptions: IconPluginOptions|string;\r\n  private options: IconPluginOptions;\r\n  private optionInitialized: boolean;\r\n\r\n  private context: string;\r\n  private iconStatsResult: IconStatsResult = null;\r\n  private childComplier: ChildComplier = null;\r\n  private isTargetHtmlWebpackPlugin = false;\r\n\r\n  constructor(options: IconPluginOptions|string) {\r\n    if (!options) {\r\n      throw new Error('\"options\" is required');\r\n    }\r\n    this.rawOptions = options;\r\n  }\r\n\r\n  private initOptions(context: string) : void{\r\n\r\n    if (this.optionInitialized) {\r\n      return;\r\n    }\r\n\r\n    // may be config file or icon file.\r\n    if (typeof this.rawOptions == 'string') {\r\n      const str = <string>this.rawOptions;\r\n      if (str.match(/\\.json$/i)) {\r\n        const pathAbsolute = path.isAbsolute(str) ? str : path.resolve(context, str);\r\n        this.options = Object.assign({}, this.defaultPluginOptions, readJsonSync(pathAbsolute));\r\n      } else if (str.match(/\\.(png|jpe?g|svg|bmp)$/i)) {\r\n        const pathAbsolute = path.isAbsolute(str) ? str : path.resolve(context, str);\r\n        this.options = Object.assign({}, this.defaultPluginOptions, { masterPicture: pathAbsolute });\r\n      } else {\r\n        throw new Error('Invalid options.');\r\n      }\r\n    } else {\r\n      if (typeof this.rawOptions !== 'object') {\r\n        throw new Error('Invalid options.');\r\n      }\r\n\r\n      if (!this.rawOptions.masterPicture) {\r\n        throw new Error('\"masterPicture\" is required.');\r\n      }\r\n\r\n      this.options = Object.assign({}, this.defaultPluginOptions, this.rawOptions);\r\n    }\r\n\r\n    if (this.options.iconsPath) {\r\n      this.options.iconsPath = /\\/$/.test(this.options.iconsPath)\r\n        ? this.options.iconsPath\r\n        : this.options.iconsPath + '/';\r\n    }\r\n\r\n    this.optionInitialized = true;\r\n  }\r\n\r\n  apply(compiler: any) {\r\n\r\n    this.context = compiler.context || compiler.options.context;\r\n    this.initOptions(this.context);\r\n\r\n    compiler.plugin('make', (compilation: any, cb: (err?: Error, request?: any) => void) => {\r\n      this.childComplier = new ChildComplier(this.context, compilation);\r\n\r\n      this.childComplier.compileTemplate(this.options)\r\n        .then((result: IconStatsResult) => {\r\n          this.iconStatsResult = result;\r\n          cb();\r\n        })\r\n        .catch(cb);\r\n    });\r\n\r\n\r\n    compiler.plugin('compilation', (compilation: any) => {\r\n\r\n      compilation.plugin('html-webpack-plugin-before-html-generation',\r\n        (htmlPluginArgs: HtmlPluginArgs, callback: (err: Error, htmlPluginArgs?: HtmlPluginArgs) => void) => {\r\n\r\n          if (!this.options.targetHtmlWebpackPluginId ||\r\n            (this.options.targetHtmlWebpackPluginId &&\r\n              this.options.targetHtmlWebpackPluginId === htmlPluginArgs.plugin.options.id)) {\r\n            this.isTargetHtmlWebpackPlugin = true;\r\n          } else {\r\n            this.isTargetHtmlWebpackPlugin = false;\r\n          }\r\n          if (!this.isTargetHtmlWebpackPlugin) {\r\n            return callback(null, htmlPluginArgs);\r\n          }\r\n\r\n          if (this.iconStatsResult && this.iconStatsResult.stats.html && this.iconStatsResult.stats.html.length) {\r\n\r\n            let faviconsTags: string[] = [];\r\n            if (htmlPluginArgs.assets.publicPath && htmlPluginArgs.assets.publicPath !== '/') {\r\n              let publicPath = htmlPluginArgs.assets.publicPath;\r\n              const endsWithBsRegex = /\\/$/;\r\n              const startWithBsRegex = /^\\/\\w/;\r\n              publicPath = endsWithBsRegex.test(publicPath) ? publicPath : publicPath + '/';\r\n              publicPath = startWithBsRegex.test(publicPath) ? publicPath.substring(1) : publicPath;\r\n\r\n              faviconsTags = this.iconStatsResult.stats.html.map((tag: any) => {\r\n                return tag.replace(/href=\\\"/i, `href=\"${publicPath}`);\r\n              });\r\n            } else {\r\n              faviconsTags.push(...this.iconStatsResult.stats.html);\r\n            }\r\n\r\n            htmlPluginArgs.plugin.options['favicons'] = {\r\n              tags: faviconsTags\r\n            };\r\n          }\r\n\r\n          return callback(null, htmlPluginArgs);\r\n        });\r\n\r\n\r\n      compilation.plugin('html-webpack-plugin-before-html-processing',\r\n        (htmlPluginArgs: HtmlPluginArgs, callback: (err: Error, htmlPluginArgs?: HtmlPluginArgs) => void) => {\r\n\r\n          if (!this.isTargetHtmlWebpackPlugin || this.options.inject === false || !htmlPluginArgs.plugin.options['favicons'] || !htmlPluginArgs.plugin.options['favicons'].tags) {\r\n            return callback(null, htmlPluginArgs);\r\n          }\r\n\r\n          if (this.options.seperateOutput) {\r\n            htmlPluginArgs.html = '';\r\n          } else {\r\n            htmlPluginArgs.html = htmlPluginArgs.html || '';\r\n          }\r\n\r\n          let faviconsTags = <string[]>htmlPluginArgs.plugin.options['favicons'].tags;\r\n\r\n          if (this.options.applyCustomAttributes && htmlPluginArgs.plugin.options.customAttributes &&\r\n            htmlPluginArgs.plugin.options.customAttributes.linkAttributes) {\r\n            const linkAttributes = <{ [key: string]: string }>htmlPluginArgs.plugin.options.customAttributes.linkAttributes;\r\n            const linkAttributesStr = Object.keys(linkAttributes).map((key: string) => {\r\n              return `${key}=\"${linkAttributes[key].toString()}\"`;\r\n            }).join(' ');\r\n\r\n            const linkRegex = /^\\<link\\s+.*\\/?\\>$/i;\r\n            faviconsTags = faviconsTags.map((tag: string) => {\r\n              if (tag.match(linkRegex)) {\r\n                return tag.replace(/(\\/?\\>)/i, ` ${linkAttributesStr}$&`);\r\n              }\r\n              return tag;\r\n            });\r\n          }\r\n\r\n          if (htmlPluginArgs.html.match(/(<\\/head>)/i)) {\r\n            htmlPluginArgs.html = htmlPluginArgs.html.replace(\r\n              /(<\\/head>)/i,\r\n              `  ${faviconsTags.join('\\n  ')}\\n$&`);\r\n          } else {\r\n            htmlPluginArgs.html = `${htmlPluginArgs.html.trim()}\\n${faviconsTags.join('\\n')}\\n`;\r\n            if (this.options.seperateOutput) {\r\n              htmlPluginArgs.html = htmlPluginArgs.html.trim();\r\n            }\r\n          }\r\n\r\n          callback(null, htmlPluginArgs);\r\n      });\r\n    });\r\n\r\n    if (!this.options.emitStats) {\r\n      compiler.plugin('emit', (compilation: any, cb: any) => {\r\n        if (this.iconStatsResult && this.iconStatsResult.outputName) {\r\n          delete compilation.assets[this.iconStatsResult.outputName];\r\n        }\r\n        cb();\r\n      });\r\n    }\r\n  }\r\n\r\n}\r\n\r\nexport class ChildComplier {\r\n\r\n  constructor(private readonly context: string, private readonly parentCompilation: any) {\r\n  }\r\n\r\n  compileTemplate(options: IconPluginOptions): Promise<IconStatsResult> {\r\n\r\n    var outputOptions = {\r\n      filename: options.statsFilename,\r\n      publicPath: this.parentCompilation.outputOptions.publicPath\r\n    };\r\n\r\n    const compilerName = this.getCompilerName(this.context, outputOptions.filename);\r\n    const childCompiler = this.parentCompilation.createChildCompiler(compilerName, outputOptions);\r\n    childCompiler.context = this.context;\r\n\r\n    const loaderOptions: IconLoaderOptions = Object.assign({}, options);\r\n    if (loaderOptions['masterPicture']) {\r\n      delete loaderOptions['masterPicture'];\r\n    }\r\n    // adding !! to a request will disable all loaders specified in the configuration\r\n    const templateEntry = `!!${require.resolve('./icon-loader')}?${JSON.stringify(loaderOptions)}!${options.masterPicture}`;\r\n\r\n    childCompiler.apply(\r\n      new NodeTemplatePlugin(outputOptions),\r\n      new NodeTargetPlugin(),\r\n      new SingleEntryPlugin(this.context, templateEntry),\r\n      new LoaderTargetPlugin('node')\r\n    );\r\n\r\n    // Store the result of the parent compilation before we start the child compilation\r\n    const assetsBeforeCompilation = Object.assign(\r\n      {},\r\n      this.parentCompilation.assets[outputOptions.filename]\r\n    );\r\n\r\n    // Fix for \"Uncaught TypeError: __webpack_require__(...) is not a function\"\r\n    // Hot module replacement requires that every child compiler has its own\r\n    // cache. @see https://github.com/ampedandwired/html-webpack-plugin/pull/179\r\n    childCompiler.plugin('compilation',\r\n      (childCompilation: any) => {\r\n        if (childCompilation.cache) {\r\n          if (!childCompilation.cache[compilerName]) {\r\n            childCompilation.cache[compilerName] = {};\r\n          }\r\n          childCompilation.cache = childCompilation.cache[compilerName];\r\n        }\r\n\r\n        childCompilation.plugin('optimize-chunk-assets',\r\n          (chunks, cb) => {\r\n            if (!chunks[0]) {\r\n              return cb(childCompilation.errors[0] || 'Favicons generation failed');\r\n            }\r\n\r\n            const resultFile = chunks[0].files[0]; // iconstats.json\r\n            const resultCode = childCompilation.assets[resultFile].source(); // module.exports = {\"iconsPath\":\"icons/\",\"html\":[\"<meta name=\\\"mobile-web-app-capable\\\" ....\r\n            let resultJson: string;\r\n            try {\r\n              /* eslint no-eval:0 */\r\n              const result = eval(resultCode);\r\n              resultJson = JSON.stringify(result);\r\n            } catch (e) {\r\n              return cb(e);\r\n            }\r\n\r\n            childCompilation.assets[resultFile] = {\r\n              source() {\r\n                return resultJson;\r\n              },\r\n              size() {\r\n                return resultJson.length;\r\n              }\r\n            };\r\n\r\n            return cb(null);\r\n          });\r\n      });\r\n\r\n    // Compile and return a promise\r\n    return new Promise((resolve: any, reject: any) => {\r\n      childCompiler.runAsChild((err: Error, entries: any[], childCompilation: any) => {\r\n        // Resolve / reject the promise\r\n        if (childCompilation && childCompilation.errors && childCompilation.errors.length) {\r\n          const errorDetails = childCompilation.errors\r\n            .map((error: any) => error.message + (error.error ? `:\\n${error.error}` : '')).join('\\n');\r\n          reject(new Error(`Child compilation failed:\\n${errorDetails}`));\r\n        } else if (err) {\r\n          reject(err);\r\n        } else {\r\n          // Replace [hash] placeholders in filename\r\n          const outputName = this.parentCompilation.mainTemplate.applyPluginsWaterfall(\r\n            'asset-path',\r\n            outputOptions.filename,\r\n            {\r\n              hash: childCompilation.hash,\r\n              chunk: entries[0]\r\n            });\r\n\r\n          // Restore the parent compilation to the state like it was before the child compilation.\r\n          this.parentCompilation.assets[outputName] = assetsBeforeCompilation[outputName];\r\n          if (assetsBeforeCompilation[outputName] === undefined) {\r\n            // If it wasn't there - delete it.\r\n            delete this.parentCompilation.assets[outputName];\r\n          }\r\n\r\n          const compilationResult: IconStatsResult = {\r\n            // Hash of the template entry point.\r\n            //hash: entries[0].hash,\r\n            outputName: outputName,\r\n            stats: JSON.parse(childCompilation.assets[outputName].source())\r\n          };\r\n          resolve(compilationResult);\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  private getCompilerName(context: string, filename: string): string {\r\n    const absolutePath = path.resolve(context, filename);\r\n    const relativePath = path.relative(context, absolutePath);\r\n    return `icon-webpack-plugin for \"${absolutePath.length < relativePath.length ? absolutePath : relativePath}\"`;\r\n  }\r\n}\r\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"]}