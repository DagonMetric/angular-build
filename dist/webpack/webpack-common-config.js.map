{"version":3,"file":"webpack-common-config.js","sourceRoot":"","sources":["../../src/webpack/webpack-common-config.ts"],"names":[],"mappings":"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","sourcesContent":["// see: https://webpack.js.org/configuration/\r\n// Ref: https://github.com/AngularClass/angular2-webpack-starter\r\n// Ref: https://github.com/MarkPieszak/aspnetcore-angular2-universal\r\n// Ref: https://github.com/aspnet/JavaScriptServices/tree/dev/templates/Angular2Spa\r\n// Ref: https://github.com/angular/angular-cli\r\n\r\nimport * as path from 'path';\r\nimport * as fs from 'fs';\r\n\r\n// ReSharper disable InconsistentNaming\r\n// Webpack built-in plugins\r\nconst CommonsChunkPlugin = require('webpack/lib/optimize/CommonsChunkPlugin');\r\nconst DefinePlugin = require('webpack/lib/DefinePlugin');\r\nconst DllPlugin = require('webpack/lib/DllPlugin');\r\nconst DllReferencePlugin = require('webpack/lib/DllReferencePlugin');\r\nconst IgnorePlugin = require('webpack/lib/IgnorePlugin');\r\nconst LoaderOptionsPlugin = require('webpack/lib/LoaderOptionsPlugin');\r\nconst NormalModuleReplacementPlugin = require('webpack/lib/NormalModuleReplacementPlugin');\r\nconst ProgressPlugin = require('webpack/lib/ProgressPlugin');\r\nconst ProvidePlugin = require('webpack/lib/ProvidePlugin');\r\nconst UglifyJsPlugin = require('webpack/lib/optimize/UglifyJsPlugin');\r\n\r\n// Thrid-party plugins\r\nconst autoprefixer = require('autoprefixer');\r\nconst postcssDiscardComments = require('postcss-discard-comments');\r\nconst ExtractTextPlugin = require('extract-text-webpack-plugin');\r\nconst CompressionPlugin = require('compression-webpack-plugin');\r\nconst HtmlWebpackPlugin = require('html-webpack-plugin');\r\nconst WebpackMd5Hash = require('webpack-md5-hash');\r\nconst CopyWebpackPlugin = require('copy-webpack-plugin');\r\nconst webpackMerge = require('webpack-merge');\r\n//var StatsPlugin = require('stats-webpack-plugin');\r\n// ReSharper restore InconsistentNaming\r\n\r\n// Internal plugins\r\n//import { ResolvePublicPathHtmlWebpackPlugin } from './plugins/resolve-public-path-html-webpack-plugin';\r\nimport { IconWebpackPlugin, IconPluginOptions } from './plugins/icon-webpack-plugin';\r\nimport { SuppressEntryChunksWebpackPlugin } from './plugins/suppress-entry-chunks-webpack-plugin';\r\nimport { CustomizeAssetsHtmlWebpackPlugin } from './plugins/customize-assets-html-webpack-plugin';\r\nimport { TryBundleDllWebpackPlugin } from './plugins/try-bundle-dll-webpack-plugin';\r\n\r\nimport { AppConfig, BuildOptions, GlobalScopedEntry, AssetEntry, DllEntry, ModuleReplacementEntry } from './models';\r\nimport { parseDllEntries, packageChunkSort, isWebpackDevServer, getEnvName as getEnv } from './helpers';\r\nimport { readJsonSync } from '../utils';\r\n\r\nexport function getWebpackCommonConfig(projectRoot: string, appConfig: AppConfig, buildOptions: BuildOptions) {\r\n    return buildOptions.dll ? getWebpackDllConfig(projectRoot, appConfig, buildOptions) : getWebpackNonDllConfig(projectRoot, appConfig, buildOptions);\r\n}\r\n\r\nexport function getWebpackDllConfig(projectRoot: string, appConfig: AppConfig, buildOptions: BuildOptions) {\r\n    const webpackSharedConfig = getWebpackSharedConfigPartial(projectRoot, appConfig, buildOptions);\r\n    return webpackMerge(webpackSharedConfig,\r\n        getWebpackDllConfigPartial(projectRoot, appConfig, buildOptions));\r\n}\r\n\r\nexport function getWebpackNonDllConfig(projectRoot: string, appConfig: AppConfig, buildOptions: BuildOptions) {\r\n    const ebpackSharedConfig = getWebpackSharedConfigPartial(projectRoot, appConfig, buildOptions);\r\n    return webpackMerge(ebpackSharedConfig,\r\n        getWebpackNonDllConfigPartial(projectRoot, appConfig, buildOptions));\r\n}\r\n\r\n// Partials\r\nexport function getWebpackSharedConfigPartial(projectRoot: string, appConfig: AppConfig, buildOptions: BuildOptions) {\r\n    const appRoot = path.resolve(projectRoot, appConfig.root);\r\n\r\n    const commonPlugins: any[] = [];\r\n\r\n    // ProgressPlugin\r\n    //\r\n    if (buildOptions.progress) {\r\n        commonPlugins.push(new ProgressPlugin());\r\n    }\r\n\r\n    // Generate stats\r\n    //\r\n    //if (emitStats) {\r\n    //  commonPlugins.push(new StatsPlugin(path.resolve(appConfig.outDir, 'webpack-stats.json'),\r\n    //    {\r\n    //      chunkModules: true\r\n    //    }));\r\n    //}\r\n\r\n    // Copy assets\r\n    //\r\n  if (typeof appConfig.assets !== 'undefined' && appConfig.assets.length && appConfig.skipCopyAssets !== false) {\r\n    commonPlugins.push(getCopyAssetPlugin(appRoot, appConfig.assets));\r\n  }\r\n\r\n  // Production plugins\r\n    //\r\n\r\n    if (buildOptions.production) {\r\n        const prodPlugins = [\r\n            new WebpackMd5Hash(),\r\n            new LoaderOptionsPlugin({ debug: false, minimize: true }),\r\n            new UglifyJsPlugin({\r\n                beautify: false,\r\n                mangle: {\r\n                    screw_ie8: true,\r\n                    keep_fnames: true\r\n                },\r\n                compress: {\r\n                    screw_ie8: true\r\n                },\r\n                comments: false,\r\n                sourceMap: appConfig.sourceMap\r\n            })\r\n        ];\r\n\r\n        if (appConfig.compressAssets) {\r\n            prodPlugins.push(new CompressionPlugin({\r\n                asset: '[path].gz[query]',\r\n                algorithm: 'gzip',\r\n                test: /\\.js$|\\.html$|\\.css$/,\r\n                threshold: 10240,\r\n                minRatio: 0.8\r\n            }));\r\n        }\r\n\r\n        // Production replacement modules\r\n        if (appConfig.moduleReplacements && appConfig.moduleReplacements.length) {\r\n            appConfig.moduleReplacements.forEach((entry: ModuleReplacementEntry) => {\r\n                prodPlugins.push(new NormalModuleReplacementPlugin(\r\n                    new RegExp(entry.resourceRegExp, 'i'),\r\n                    entry.newResource\r\n                ));\r\n            });\r\n        }\r\n        commonPlugins.push(...prodPlugins);\r\n    }\r\n\r\n    const webpackSharedConfig = {\r\n        target: appConfig.target === 'node' ? 'node' : 'web',\r\n        devtool: buildOptions.production ? false : 'source-map',\r\n        context: projectRoot,\r\n        output: {\r\n            path: path.resolve(projectRoot, appConfig.outDir),\r\n            publicPath: appConfig.publicPath,\r\n            filename: appConfig.appendVersionHash\r\n                ? '[name].[chunkhash].js'\r\n                : '[name].js',\r\n            sourceMapFilename: appConfig.appendVersionHash\r\n                ? '[name].[chunkhash].map'\r\n                : '[name].map',\r\n            chunkFilename: appConfig.appendVersionHash\r\n                ? '[id].[chunkhash].js'\r\n                : '[id].js',\r\n            // For dll only\r\n            // The name of the global variable which the library's\r\n            // require() function will be assigned to\r\n            library: '[name]_[chunkhash]' //'[name]_lib' || '[name]_[hash]'\r\n        },\r\n        plugins: commonPlugins,\r\n        // >= version 2.2\r\n        performance: {\r\n            hints: buildOptions.performanceHint ? 'warning' : false, // boolean | \"error\" | \"warning\"\r\n            maxAssetSize: 320000, // int (in bytes),\r\n            maxEntrypointSize: 400000, // int (in bytes)\r\n            assetFilter(assetFilename: string) {\r\n                // Function predicate that provides asset filenames\r\n                return assetFilename.endsWith('.css') || assetFilename.endsWith('.js');\r\n            }\r\n        },\r\n        node: {\r\n            fs: 'empty',\r\n            global: true,\r\n            crypto: 'empty',\r\n            tls: 'empty',\r\n            net: 'empty',\r\n            process: true,\r\n            module: false,\r\n            clearImmediate: false,\r\n            setImmediate: false\r\n        },\r\n        stats: {\r\n            //modules: true,\r\n            colors: true,\r\n            hash: true,\r\n            timings: true,\r\n            errors: true,\r\n            errorDetails: true,\r\n            warnings: true,\r\n            assets: true, //buildOptions.debug,\r\n            version: true, //buildOptions.debug,\r\n\r\n            publicPath: false,\r\n\r\n            chunkModules: false, // TODO: set to true when console to file output is fixed\r\n            reasons: buildOptions.verbose,\r\n            children: buildOptions.verbose,\r\n            chunks: buildOptions.verbose // make sure 'chunks' is false or it will add 5-10 seconds to your build and incremental build time, due to excessive output.\r\n        }\r\n    };\r\n\r\n    return webpackSharedConfig;\r\n}\r\n\r\nexport function getWebpackDllConfigPartial(projectRoot: string, appConfig: AppConfig, buildOptions: BuildOptions) {\r\n    const appRoot = path.resolve(projectRoot, appConfig.root);\r\n\r\n    // Entry\r\n    const entries: string[] = [];\r\n    const dllParsedResult = parseDllEntries(appRoot, appConfig.dlls, buildOptions.production);\r\n    dllParsedResult.entries.forEach((e: DllEntry) => {\r\n        if (Array.isArray(e.entry)) {\r\n            entries.push(...e.entry);\r\n        } else {\r\n            entries.push(e.entry);\r\n        }\r\n    });\r\n    // TODO: add file deps\r\n\r\n    const entryPoints: { [key: string]: string[] } = {};\r\n    entryPoints[appConfig.dllOutChunkName] = entries;\r\n\r\n    // Rules\r\n    const rules: any[] = [];\r\n\r\n    // Plugins\r\n    const plugins = [\r\n        new DllPlugin({\r\n            path: path.resolve(projectRoot, appConfig.outDir, `[name]-manifest.json`),\r\n            name: '[name]_[chunkhash]' //'[name]_lib' || [name]_[chunkhash]' || '[name]_[hash]'\r\n        }),\r\n\r\n        // Workaround for https://github.com/stefanpenner/es6-promise/issues/100\r\n        new IgnorePlugin(/^vertx$/)\r\n\r\n        // Workaround for https://github.com/andris9/encoding/issues/16\r\n        //new NormalModuleReplacementPlugin(/\\/iconv-loader$/, require.resolve('node-noop')))\r\n    ];\r\n\r\n    // Favicons plugins\r\n    if (typeof appConfig.faviconConfig !== 'undefined' &&\r\n      appConfig.faviconConfig !== null &&\r\n      appConfig.skipGenerateIcons !== false) {\r\n        const faviconPlugins = getFaviconPlugins(projectRoot, appConfig, buildOptions.production, false);\r\n        if (faviconPlugins.length) {\r\n            plugins.push(...faviconPlugins);\r\n\r\n            // remove starting slash\r\n            plugins.push(new CustomizeAssetsHtmlWebpackPlugin({\r\n                removeStartingSlash: true\r\n            }));\r\n        }\r\n    }\r\n\r\n    const webpackDllConfig = {\r\n        resolve: {\r\n            extensions: ['.js']\r\n        },\r\n        entry: entryPoints,\r\n        output: {\r\n            libraryTarget: appConfig.target === 'node' ? 'commonjs2' : 'var'\r\n        },\r\n        module: {\r\n            rules: rules\r\n        },\r\n        plugins: plugins\r\n    };\r\n\r\n    return webpackDllConfig;\r\n}\r\n\r\nexport function getWebpackNonDllConfigPartial(projectRoot: string, appConfig: AppConfig, buildOptions: BuildOptions) {\r\n    let entryPoints: { [key: string]: string[] } = {};\r\n    let extraPlugins: any[] = [];\r\n    let extraRules: any[] = [];\r\n    let lazyChunks: string[] = [];\r\n\r\n    // Try bundle dlls\r\n    if (appConfig.referenceDll) {\r\n        // TODO: to review\r\n        const dllManifestFile = path.resolve(projectRoot, appConfig.outDir, `${appConfig.dllOutChunkName || 'vendor'}-manifest.json`);\r\n        const webpackDllConfig = getWebpackDllConfig(projectRoot, appConfig, buildOptions);\r\n        extraPlugins.push(new TryBundleDllWebpackPlugin({\r\n            debug: !buildOptions.production,\r\n            manifestFile: dllManifestFile,\r\n            webpackDllConfig: webpackDllConfig\r\n        }));\r\n    }\r\n\r\n\r\n    const nodeModulesPath = path.resolve(projectRoot, 'node_modules');\r\n    const appRoot = path.resolve(projectRoot, appConfig.root);\r\n\r\n    const env = getEnv(buildOptions.production);\r\n    const envLong = getEnv(buildOptions.production, true);\r\n    const metadata = {\r\n        'ENV': JSON.stringify(envLong),\r\n        'process.env': {\r\n            ENV: JSON.stringify(envLong),\r\n            NODE_ENV: JSON.stringify(process.env.NODE_ENV)\r\n        }\r\n    };\r\n\r\n    // Global scripts\r\n    //\r\n    if (appConfig.scripts && appConfig.scripts.length > 0) {\r\n        const globalScripts = parseGlobalScopedEntry(appConfig.scripts, appRoot, 'scripts');\r\n\r\n        // Add entry points and lazy chunks\r\n        globalScripts.forEach(script => {\r\n            if (script.lazy) {\r\n                lazyChunks.push(script.entry);\r\n            }\r\n            entryPoints[script.entry] = (entryPoints[script.entry] || []).concat(script.path);\r\n        });\r\n\r\n        // Load global scripts using script-loader\r\n        extraRules.push({\r\n            include: globalScripts.map((script) => script.path),\r\n            test: /\\.js$/,\r\n            loader: 'script-loader'\r\n        });\r\n    }\r\n\r\n    // Global styles\r\n    //\r\n    if (appConfig.styles && appConfig.styles.length > 0) {\r\n        const globalStyles = parseGlobalScopedEntry(appConfig.styles, appRoot, 'styles');\r\n        let extractedCssEntryPoints: string[] = [];\r\n\r\n        // Add entry points and lazy chunks\r\n        globalStyles.forEach(style => {\r\n            if (style.lazy) {\r\n                lazyChunks.push(style.entry);\r\n            }\r\n\r\n            if (!entryPoints[style.entry]) {\r\n                // Since this entry point doesn't exist yet, it's going to only have\r\n                // extracted css and we can supress the entry point\r\n                extractedCssEntryPoints.push(style.entry);\r\n                entryPoints[style.entry] = (entryPoints[style.entry] || []).concat(style.path);\r\n            } else {\r\n                // Existing entry point, just push the css in\r\n                entryPoints[style.entry].push(style.path);\r\n            }\r\n        });\r\n\r\n        // Create css loaders for component css and for global css\r\n        extraRules.push(...makeCssLoaders(globalStyles.map((style) => style.path)));\r\n\r\n        if (extractedCssEntryPoints.length > 0) {\r\n            // Don't emit the .js entry point for extracted styles\r\n            extraPlugins.push(new SuppressEntryChunksWebpackPlugin({\r\n                chunks: extractedCssEntryPoints,\r\n                supressPattern: /\\.js$/i,\r\n                assetTagsFilterFunc: (tag: any) => !(tag.tagName === 'script' && tag.attributes.src && tag.attributes.src.match(/\\.css$/i))\r\n\r\n            }));\r\n        }\r\n    } else {\r\n        // Non global styles\r\n        // create css loaders for component css\r\n        extraRules.push(...makeCssLoaders());\r\n    }\r\n\r\n    // Main entry\r\n    //\r\n\r\n    // Rules\r\n    const rules: any = [\r\n        // js source map\r\n        {\r\n            enforce: 'pre',\r\n            test: /\\.js$/,\r\n            loader: 'source-map-loader',\r\n            exclude: [nodeModulesPath]\r\n        },\r\n\r\n        // .json files are now supported without the json-loader, webpack >= 2.2\r\n        {\r\n            test: /\\.json$/,\r\n            loader: 'json-loader'\r\n        },\r\n\r\n        // html\r\n        {\r\n            test: /\\.html$/,\r\n            loader: 'raw-loader',\r\n            exclude: [path.resolve(projectRoot, appConfig.root, appConfig.index || 'index.html')]\r\n        },\r\n\r\n        // font loaders\r\n        {\r\n            test: /\\.(otf|ttf|woff|woff2)(\\?v=\\d+\\.\\d+\\.\\d+)?$/,\r\n            loader: 'url-loader?limit=10000&name=assets/[name].[ext]'\r\n        },\r\n        {\r\n            test: /\\.eot(\\?v=\\d+\\.\\d+\\.\\d+)?$/,\r\n            loader: 'file-loader?name=assets/[name].[ext]'\r\n        },\r\n\r\n        // Image loaders\r\n        {\r\n            test: /\\.(jpg|png|gif)$/,\r\n            loader: 'url-loader?limit=10000&name=assets/[name].[ext]'\r\n        },\r\n        {\r\n            test: /\\.(jpe?g|png|gif|svg)(\\?{0}(?=\\?|$))/,\r\n            use: [\r\n                'file-loader?name=assets/[name].[ext]',\r\n                {\r\n                    loader: 'image-webpack-loader',\r\n                    options: {\r\n                        progressive: true,\r\n                        optimizationLevel: 7,\r\n                        interlaced: false\r\n                    }\r\n                }\r\n            ]\r\n        }\r\n    ].concat(extraRules);\r\n\r\n    // Plugins\r\n    const plugins: any = [\r\n        new ExtractTextPlugin({\r\n            filename: appConfig.appendVersionHash\r\n                ? '[name].[chunkhash].css'\r\n                : '[name].css',\r\n            disable: false,\r\n            allChunks: true\r\n        }),\r\n        new LoaderOptionsPlugin({\r\n            test: /\\.(css|scss|sass|less|styl)$/,\r\n            options: {\r\n                postcss: !buildOptions.production\r\n                    ? [autoprefixer()]\r\n                    : [\r\n                        autoprefixer(),\r\n                        postcssDiscardComments\r\n                    ],\r\n                cssLoader: { sourceMap: appConfig.sourceMap },\r\n                sassLoader: { sourceMap: appConfig.sourceMap },\r\n                lessLoader: { sourceMap: appConfig.sourceMap },\r\n                stylusLoader: { sourceMap: appConfig.sourceMap},\r\n                // context needed as a workaround https://github.com/jtangelder/sass-loader/issues/285\r\n                context: projectRoot\r\n            }\r\n        })\r\n    ].concat(extraPlugins);\r\n\r\n    // Provide plugin\r\n    //\r\n    if (appConfig.provide && typeof appConfig.provide === 'object') {\r\n        plugins.push(\r\n            // NOTE: when adding more properties make sure you include them in custom-typings.d.ts\r\n            new ProvidePlugin(appConfig.provide)\r\n        );\r\n    }\r\n\r\n    // DefinePlugin\r\n    //\r\n    plugins.push(\r\n        // NOTE: when adding more properties make sure you include them in custom-typings.d.ts\r\n        new DefinePlugin(metadata)\r\n    );\r\n\r\n    // Replace environment\r\n    //\r\n    if (appConfig.environments && appConfig.environments[env]) {\r\n        plugins.push(new NormalModuleReplacementPlugin(\r\n            // This plugin is responsible for swapping the environment files.\r\n            // Since it takes a RegExp as first parameter, we need to escape the path.\r\n            // See https://webpack.github.io/docs/list-of-plugins.html#normalmodulereplacementplugin\r\n            new RegExp(path.resolve(appRoot, appConfig.environments['source'])\r\n                .replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, '\\\\$&')),\r\n            path.resolve(appRoot, appConfig.environments[env])\r\n        ));\r\n    }\r\n\r\n    // Styles Inject\r\n    const separateStylesOut = appConfig.htmlInjectOptions.stylesOutFileName && entryPoints['styles'];\r\n    const stylesHtmlWebpackPluginId = separateStylesOut ? 'StylesHtmlWebpackPlugin' : null;\r\n    if (separateStylesOut) {\r\n        plugins.push(new HtmlWebpackPlugin({\r\n            templateContent: ' ',\r\n            filename: path.resolve(projectRoot, appConfig.outDir, appConfig.htmlInjectOptions.stylesOutFileName),\r\n            title: '',\r\n            chunks: ['styles'],\r\n            customAttributes: appConfig.htmlInjectOptions.customTagAttributes,\r\n            inject: true,\r\n            id: stylesHtmlWebpackPluginId\r\n        }));\r\n\r\n        // custom link attributes\r\n        if (appConfig.htmlInjectOptions.customTagAttributes && appConfig.htmlInjectOptions.customTagAttributes.find(c => c.tagName === 'link')) {\r\n            const customLinkAttributes = appConfig.htmlInjectOptions.customTagAttributes\r\n                .filter(c => c.tagName === 'link');\r\n            plugins.push(new CustomizeAssetsHtmlWebpackPlugin({\r\n                targetHtmlWebpackPluginId: stylesHtmlWebpackPluginId,\r\n                customAttributes: customLinkAttributes\r\n            }));\r\n        }\r\n\r\n        // move head assets to body\r\n        plugins.push(new CustomizeAssetsHtmlWebpackPlugin({\r\n            targetHtmlWebpackPluginId: stylesHtmlWebpackPluginId,\r\n            moveHeadAssetsToBody: true\r\n        }));\r\n    }\r\n\r\n    // Favicons inject\r\n  if (typeof appConfig.faviconConfig !== 'undefined' &&\r\n    appConfig.faviconConfig !== null &&\r\n    appConfig.skipGenerateIcons !== false) {\r\n    const faviconPlugins = getFaviconPlugins(projectRoot,\r\n      appConfig,\r\n      buildOptions.production,\r\n      false,\r\n      stylesHtmlWebpackPluginId);\r\n    if (faviconPlugins.length) {\r\n      plugins.push(...faviconPlugins);\r\n    }\r\n  }\r\n\r\n  // Default inject\r\n    if (appConfig.index || appConfig.htmlInjectOptions.indexOutFileName) {\r\n        const defaultHtmlWebpackPluginId = 'DefaultHtmlWebpackPlugin';\r\n        const excludeChunks = lazyChunks;\r\n        if (separateStylesOut) {\r\n            excludeChunks.push('styles');\r\n        }\r\n\r\n        if (appConfig.index && appConfig.index.trim()) {\r\n            plugins.push(new HtmlWebpackPlugin({\r\n                template: path.resolve(appRoot, appConfig.index),\r\n                filename: path.resolve(projectRoot, appConfig.outDir, appConfig.htmlInjectOptions.indexOutFileName || appConfig.index),\r\n                chunksSortMode: packageChunkSort(['inline', 'styles', 'scripts', appConfig.dllOutChunkName, 'main']),\r\n                excludeChunks: excludeChunks,\r\n                title: '',\r\n                isDevServer: isWebpackDevServer(),\r\n                metadata: metadata,\r\n                customAttributes: appConfig.htmlInjectOptions.customTagAttributes,\r\n                id: defaultHtmlWebpackPluginId\r\n                //hot:\r\n                //hash: false,\r\n                //favicon: false,\r\n                //minify: false,\r\n                //cache: true,\r\n                //compile: true,\r\n                //chunks: \"all\",\r\n                //inject: 'body' //'head' || 'body' || true || false\r\n            }));\r\n        } else {\r\n            plugins.push(new HtmlWebpackPlugin({\r\n                templateContent: ' ',\r\n                filename: path.resolve(projectRoot, appConfig.outDir, appConfig.htmlInjectOptions.indexOutFileName || appConfig.index),\r\n                chunksSortMode: packageChunkSort(['inline', 'styles', 'scripts', appConfig.dllOutChunkName, 'main']),\r\n                excludeChunks: excludeChunks,\r\n                title: '',\r\n                customAttributes: appConfig.htmlInjectOptions.customTagAttributes,\r\n                id: defaultHtmlWebpackPluginId,\r\n                inject: true\r\n            }));\r\n\r\n            // move head assets to body\r\n            if (appConfig.htmlInjectOptions.customTagAttributes) {\r\n                plugins.push(new CustomizeAssetsHtmlWebpackPlugin({\r\n                    targetHtmlWebpackPluginId: defaultHtmlWebpackPluginId,\r\n                    moveHeadAssetsToBody: true\r\n                }));\r\n            }\r\n        }\r\n\r\n        // add dll entry - vendor.js\r\n        if (appConfig.referenceDll) {\r\n            const dllRefScript = `${appConfig.dllOutChunkName}.js`;\r\n            let customScriptAttributes : any[] = [];\r\n            if (appConfig.htmlInjectOptions.customTagAttributes) {\r\n                customScriptAttributes = appConfig.htmlInjectOptions.customTagAttributes\r\n                    .filter(c => c.tagName === 'script');\r\n            }\r\n            plugins.push(new CustomizeAssetsHtmlWebpackPlugin({\r\n                targetHtmlWebpackPluginId: defaultHtmlWebpackPluginId,\r\n                scriptSrcToBodyAssets: [dllRefScript],\r\n                customAttributes: customScriptAttributes,\r\n                addPublicPath: true\r\n            }));\r\n        }\r\n\r\n        // ** Order is import\r\n        // custom script/link attributes\r\n        if (appConfig.htmlInjectOptions.customTagAttributes) {\r\n            plugins.push(new CustomizeAssetsHtmlWebpackPlugin({\r\n                targetHtmlWebpackPluginId: defaultHtmlWebpackPluginId,\r\n                customAttributes: appConfig.htmlInjectOptions.customTagAttributes\r\n            }));\r\n        }\r\n    }\r\n\r\n    // remove starting slash\r\n    plugins.push(new CustomizeAssetsHtmlWebpackPlugin({\r\n        removeStartingSlash: true\r\n    }));\r\n\r\n    // DllReferencePlugin, CommonsChunkPlugin\r\n    //\r\n    if (appConfig.referenceDll) {\r\n        if (appConfig.target === 'node') {\r\n            plugins.push(\r\n                new DllReferencePlugin({\r\n                    context: projectRoot, // or '.'\r\n                    sourceType: 'commonjs2',\r\n                    manifest: require(path.resolve(projectRoot, appConfig.outDir, `${appConfig.dllOutChunkName}-manifest.json`)),\r\n                    name: `./${appConfig.dllOutChunkName}`\r\n                })\r\n            );\r\n        } else {\r\n            plugins.push(\r\n                new DllReferencePlugin({\r\n                    context: projectRoot, //'.',\r\n                    manifest: require(path.resolve(projectRoot, appConfig.outDir, `${appConfig.dllOutChunkName}-manifest.json`))\r\n                })\r\n            );\r\n        }\r\n\r\n        plugins.push(new CommonsChunkPlugin({\r\n            minChunks: Infinity,\r\n            name: 'inline'\r\n        }));\r\n\r\n    } else {\r\n        plugins.push(new CommonsChunkPlugin({\r\n            minChunks: Infinity,\r\n            name: 'inline'\r\n        }));\r\n\r\n        // This enables tree shaking of the vendor modules\r\n        plugins.push(new CommonsChunkPlugin({\r\n            name: appConfig.dllOutChunkName,\r\n            chunks: ['main'],\r\n            minChunks: (module: any) => module.userRequest && module.userRequest.startsWith(nodeModulesPath)\r\n        }));\r\n    }\r\n\r\n    const webpackNonDllConfig = {\r\n        resolve: {\r\n            extensions: ['.js', '.json'],\r\n            modules: [appRoot, nodeModulesPath]\r\n        },\r\n        entry: entryPoints,\r\n        module: {\r\n            rules: rules\r\n        },\r\n        plugins: plugins\r\n    };\r\n\r\n    return webpackNonDllConfig;\r\n}\r\n\r\n\r\n// Private methods\r\nfunction getFaviconPlugins(projectRoot: string, appConfig: AppConfig, isProduction: boolean, emitStats: boolean, targetHtmlWebpackPluginId?: string) {\r\n    const appRoot = path.resolve(projectRoot, appConfig.root);\r\n\r\n    const plugins: any[] = [];\r\n    let iconConfig: IconPluginOptions = null;\r\n\r\n    if (typeof appConfig.faviconConfig === 'string' && appConfig.faviconConfig.match(/\\.json$/i)) {\r\n        iconConfig = readJsonSync(path.resolve(appRoot, appConfig.faviconConfig));\r\n    }\r\n\r\n    if (!iconConfig || !iconConfig.masterPicture) {\r\n        return plugins;\r\n    }\r\n\r\n    iconConfig.masterPicture = path.resolve(appRoot, iconConfig.masterPicture);\r\n    if (!iconConfig.iconsPath) {\r\n        iconConfig.iconsPath = appConfig.appendVersionHash\r\n            ? 'icons-[hash]/'\r\n            : 'icons/';\r\n    }\r\n    if (!iconConfig.statsFilename) {\r\n        iconConfig.statsFilename = appConfig.appendVersionHash\r\n            ? 'iconstats-[hash].json'\r\n            : 'iconstats.json';\r\n    }\r\n    if (typeof iconConfig.emitStats === 'undefined') {\r\n        iconConfig.emitStats = emitStats;\r\n    }\r\n\r\n    let iconsInjectOutFileName: string = null;\r\n    if (appConfig.htmlInjectOptions && appConfig.htmlInjectOptions.iconsOutFileName) {\r\n        iconsInjectOutFileName = appConfig.htmlInjectOptions.iconsOutFileName;\r\n    }\r\n\r\n    const iconHtmlSeparateOut = iconsInjectOutFileName !== null &&\r\n    ((iconsInjectOutFileName !== appConfig.htmlInjectOptions.indexOutFileName) ||\r\n        (iconsInjectOutFileName !== appConfig.index));\r\n\r\n    if (typeof iconConfig.inject === 'undefined') {\r\n        if (appConfig.index || appConfig.htmlInjectOptions.indexOutFileName || iconHtmlSeparateOut) {\r\n            iconConfig.inject = true;\r\n        } else {\r\n            iconConfig.inject = true;\r\n        }\r\n    }\r\n\r\n    const iconsHtmlWebpackPluginId = (iconConfig.inject && iconHtmlSeparateOut)\r\n        ? 'IconsHtmlWebpackPlugin'\r\n        : targetHtmlWebpackPluginId;\r\n\r\n    let seperateOutput = false;\r\n    // Seperate inject output\r\n    if (iconConfig.inject && iconHtmlSeparateOut) {\r\n        seperateOutput = true;\r\n\r\n        plugins.push(new HtmlWebpackPlugin({\r\n            templateContent: ' ',\r\n            filename: path.resolve(projectRoot, appConfig.outDir, iconsInjectOutFileName),\r\n            chunks: [],\r\n            title: '',\r\n            customAttributes: appConfig.htmlInjectOptions.customTagAttributes,\r\n            inject: true,\r\n            id: iconsHtmlWebpackPluginId\r\n        }));\r\n    }\r\n\r\n    iconConfig.targetHtmlWebpackPluginId = iconsHtmlWebpackPluginId;\r\n    iconConfig.seperateOutput = seperateOutput;\r\n\r\n    plugins.push(\r\n        new IconWebpackPlugin(iconConfig)\r\n    );\r\n\r\n    return plugins;\r\n}\r\n\r\nfunction getCopyAssetPlugin(baseDir: string, assetEntry: string | (string | AssetEntry)[]) {\r\n    let assets: AssetEntry[] = [];\r\n    const prepareFormGlob = (p: string) => {\r\n        if (!p) {\r\n            return '';\r\n        }\r\n\r\n        if (p.lastIndexOf('*') === -1 && !path.isAbsolute(p) &&\r\n            fs.existsSync(path.resolve(baseDir, p)) &&\r\n            fs.statSync(path.resolve(baseDir, p)).isDirectory()) {\r\n            if (p.lastIndexOf('/') > -1) {\r\n                p = p.substring(0, p.length - 1);\r\n            }\r\n            p += '/**/*';\r\n        }\r\n        return p;\r\n    };\r\n\r\n    if (Array.isArray(assetEntry)) {\r\n        assets = assetEntry.map((asset: string | AssetEntry) => {\r\n            if (typeof asset === 'string') {\r\n                const fromGlob = prepareFormGlob(asset);\r\n                return {\r\n                    from: {\r\n                        glob: fromGlob,\r\n                        dot: true\r\n                    },\r\n                    context: baseDir\r\n                };\r\n            } else if (typeof asset === 'object' && asset.from) {\r\n                if (!asset.context) {\r\n                    asset.context = baseDir;\r\n                }\r\n                if (typeof asset.from === 'string') {\r\n                    const fromGlob = prepareFormGlob(asset.from);\r\n                    asset.from = {\r\n                        glob: fromGlob,\r\n                        dot: true\r\n                    };\r\n                }\r\n                return asset;\r\n            } else {\r\n                throw new Error(`Invalid 'assets' value in appConfig.`);\r\n            }\r\n        });\r\n    } else if(typeof assetEntry === 'string'){\r\n        const fromGlob = prepareFormGlob(assetEntry);\r\n        assets = [{\r\n            from: {\r\n                glob: fromGlob,\r\n                dot: true\r\n            },\r\n            context: baseDir\r\n        }];\r\n    }\r\n\r\n    const plugin = new CopyWebpackPlugin(assets,\r\n        {\r\n            ignore: ['**/.gitkeep']\r\n            //copyUnmodified: false\r\n        });\r\n    return plugin;\r\n}\r\n\r\n// create array of css loaders\r\n// Ref: https://github.com/angular/angular-cli\r\nfunction makeCssLoaders(stylePaths: string[] = []) {\r\n    const baseRules = [\r\n        { test: /\\.css$/, loaders: <any[]>[] },\r\n        { test: /\\.scss$|\\.sass$/, loaders: ['sass-loader'] },\r\n        { test: /\\.less$/, loaders: ['less-loader'] },\r\n        { test: /\\.styl$/, loaders: ['stylus-loader'] }\r\n    ];\r\n\r\n    const commonLoaders = ['postcss-loader'];\r\n\r\n    // load component css as raw strings\r\n    const cssLoaders: any = baseRules.map(({test, loaders}) => ({\r\n        exclude: stylePaths, test, loaders: ['raw-loader'].concat(commonLoaders).concat(loaders)\r\n    }));\r\n\r\n    if (stylePaths && stylePaths.length > 0) {\r\n        // load global css as css files\r\n        cssLoaders.push(...baseRules.map(({test, loaders}) => ({\r\n            include: stylePaths, test, loaders: ExtractTextPlugin.extract({\r\n                remove: false,\r\n                loader: ['css-loader'].concat(commonLoaders).concat(loaders),\r\n                fallbackLoader: 'style-loader'\r\n            })\r\n        })));\r\n    }\r\n\r\n    return cssLoaders;\r\n}\r\n\r\n// convert all extra entries into the object representation, fill in defaults\r\n// Ref: https://github.com/angular/angular-cli\r\nfunction parseGlobalScopedEntry(\r\n    extraEntries: string | (string | GlobalScopedEntry)[],\r\n    appRoot: string,\r\n    defaultEntry: string\r\n): GlobalScopedEntry[] {\r\n    if (!extraEntries || !extraEntries.length) {\r\n        return [];\r\n    }\r\n    const arrayEntries = Array.isArray(extraEntries) ? extraEntries : [extraEntries];\r\n\r\n    return arrayEntries\r\n        .map((extraEntry: string | GlobalScopedEntry) =>\r\n            typeof extraEntry === 'string' ? { input: extraEntry } : extraEntry)\r\n        .map((extraEntry: GlobalScopedEntry) => {\r\n            extraEntry.path = path.resolve(appRoot, extraEntry.input);\r\n            if (extraEntry.output) {\r\n                extraEntry.entry = extraEntry.output.replace(/\\.(js|css)$/i, '');\r\n            } else if (extraEntry.lazy) {\r\n                extraEntry.entry = extraEntry.input.replace(/\\.(js|css|scss|sass|less|styl)$/i, '');\r\n            } else {\r\n                extraEntry.entry = defaultEntry;\r\n            }\r\n            return extraEntry;\r\n        });\r\n}\r\n\r\n"]}