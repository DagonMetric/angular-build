{"version":3,"file":"webpack-config.js","sourceRoot":"","sources":["../../src/webpack/webpack-config.ts"],"names":[],"mappings":"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","sourcesContent":["import * as path from 'path';\r\nimport * as fs from 'fs';\r\n\r\nimport { AngularAppConfig, AngularBuildOptions, AngularBuildConfig } from './models';\r\nimport { hasProdArg, isDllBuildFromNpmEvent, isAoTBuildFromNpmEvent } from './helpers';\r\nimport { readJsonSync } from '../utils';\r\n\r\nimport { getWebpackAngularConfig } from './webpack-angular-config';\r\n\r\nconst allowOverrideKeys = [\r\n    'root', 'outDir', 'main', 'entry', 'assets', 'styles', 'scripts', 'tsconfig', 'index', 'publicPath',\r\n    'htmlInjectOptions', 'faviconConfig', 'provide', 'referenceDll', 'moduleReplacements', 'enabled', 'appendOutputHash', 'compressAssets', 'copyAssets', 'generateIcons', 'sourceMap'\r\n];\r\n\r\nexport function getWebpackConfigs(projectRoot: string, angularBuildConfig?: AngularBuildConfig, buildOptions?: AngularBuildOptions) {\r\n    projectRoot = projectRoot || process.cwd();\r\n\r\n    if (!angularBuildConfig) {\r\n        let configFileExists = false;\r\n        let configPath = 'angular-build.json';\r\n        if (!fs.existsSync(path.resolve(projectRoot, configPath))) {\r\n            const tmpConfigPath = 'angular-cli.json';\r\n            if (fs.existsSync(path.resolve(projectRoot, tmpConfigPath))) {\r\n                configPath = tmpConfigPath;\r\n                configFileExists = true;\r\n            }\r\n        } else {\r\n            configFileExists = true;\r\n        }\r\n\r\n        if (!configFileExists) {\r\n            throw new Error(`'angular-build.json' or 'angular-cli.json' file could not be found in ${projectRoot}.`);\r\n        }\r\n        angularBuildConfig = readJsonSync(path.resolve(projectRoot, configPath));\r\n    }\r\n\r\n    // Merge buildOptions\r\n    buildOptions = mergeBuildOptions(buildOptions);\r\n\r\n    // Extends\r\n    const appConfigs = angularBuildConfig.apps.map((app: AngularAppConfig) => {\r\n        let cloneApp = Object.assign({}, app);\r\n        if (cloneApp.extends) {\r\n            const baseApps = angularBuildConfig.apps.filter((a: AngularAppConfig) => a.name === cloneApp.extends);\r\n            if (baseApps && baseApps.length > 0) {\r\n                const cloneBaseApp = Object.assign({}, baseApps[0]);\r\n                cloneApp = Object.assign({}, cloneBaseApp, cloneApp);\r\n            }\r\n        }\r\n        return cloneApp;\r\n    });\r\n\r\n    appConfigs.forEach((appConfig: AngularAppConfig) => {\r\n        // Build target overrides\r\n        mergeAppConfigWithBuildTargetOverrides(appConfig, buildOptions);\r\n        // merge wit defaults\r\n        mergeAppConfigWithDefaults(appConfig, buildOptions);\r\n    });\r\n\r\n    const webpackConfigs = appConfigs.filter((appConfig: AngularAppConfig) => appConfig.skip === false)\r\n        .map((appConfig: AngularAppConfig) => {\r\n            return getWebpackConfig(projectRoot, appConfig, buildOptions, true);\r\n        });\r\n    return webpackConfigs;\r\n}\r\n\r\nexport function getWebpackConfig(projectRoot: string, appConfig: AngularAppConfig, buildOptions?: AngularBuildOptions, skipMerge?: boolean) {\r\n    if (!skipMerge) {\r\n        projectRoot = projectRoot || process.cwd();\r\n        buildOptions = mergeBuildOptions(buildOptions);\r\n        mergeAppConfigWithBuildTargetOverrides(appConfig, buildOptions);\r\n        mergeAppConfigWithDefaults(appConfig, buildOptions);\r\n    }\r\n\r\n    buildOptions = buildOptions || {};\r\n\r\n    if (!appConfig) {\r\n        throw new Error(`'appConfig' is required.`);\r\n    }\r\n    if (typeof appConfig !== 'object') {\r\n        throw new Error(`Invalid 'appConfig'. 'appConfig' must be an object, but passed ${typeof appConfig}.`);\r\n    }\r\n    if (!buildOptions.dll &&\r\n        !appConfig.main &&\r\n        (!appConfig.styles || !appConfig.styles.length) &&\r\n        (!appConfig.scripts || !appConfig.scripts.length)) {\r\n        throw new Error(`No entry. Please set entry in appConfig.`);\r\n    }\r\n    if (buildOptions.dll && (!appConfig.dlls || !appConfig.dlls.length)) {\r\n        throw new Error(`No dll entry. Please set dll entries in appConfig.`);\r\n    }\r\n\r\n    // Set defaults\r\n    appConfig.root = appConfig.root || projectRoot;\r\n    appConfig.outDir = appConfig.outDir || appConfig.root;\r\n\r\n    return getWebpackAngularConfig(projectRoot, appConfig, buildOptions);\r\n}\r\n\r\nfunction mergeBuildOptions(buildOptions: AngularBuildOptions): AngularBuildOptions {\r\n    const defaultBuildOptions: AngularBuildOptions = {\r\n        production: hasProdArg(),\r\n        dll: isDllBuildFromNpmEvent(),\r\n        aot: isAoTBuildFromNpmEvent()\r\n    };\r\n    return Object.assign(defaultBuildOptions, buildOptions || {});\r\n}\r\n\r\nfunction overrideAppConfig(appConfig: any, newConfig: any) {\r\n    if (!newConfig) {\r\n        return;\r\n    }\r\n\r\n    for (let k in newConfig) {\r\n        if (newConfig.hasOwnProperty(k) && allowOverrideKeys.indexOf(k) > -1) {\r\n            appConfig[k] = newConfig[k];\r\n        }\r\n    }\r\n}\r\n\r\nfunction mergeAppConfigWithBuildTargetOverrides(appConfig: AngularAppConfig, buildOptions: AngularBuildOptions) {\r\n    if (!appConfig || !appConfig.buildTargetOverrides) {\r\n        return;\r\n    }\r\n    Object.keys(appConfig.buildTargetOverrides).forEach((buildTargetKey: string) => {\r\n        switch (buildTargetKey.toLowerCase()) {\r\n            case 'prod':\r\n            case 'production':\r\n                if (buildOptions.production) {\r\n                    const newConfig = appConfig.buildTargetOverrides[buildTargetKey];\r\n                    overrideAppConfig(appConfig, newConfig);\r\n                }\r\n                break;\r\n            case 'dev':\r\n            case 'development':\r\n                if (!buildOptions.production) {\r\n                    const newConfig = appConfig.buildTargetOverrides[buildTargetKey];\r\n                    overrideAppConfig(appConfig, newConfig);\r\n                }\r\n                break;\r\n            case 'dll':\r\n                if (!buildOptions.dll) {\r\n                    const newConfig = appConfig.buildTargetOverrides[buildTargetKey];\r\n                    overrideAppConfig(appConfig, newConfig);\r\n                }\r\n                break;\r\n            case 'aot':\r\n                if (!buildOptions.dll) {\r\n                    const newConfig = appConfig.buildTargetOverrides[buildTargetKey];\r\n                    overrideAppConfig(appConfig, newConfig);\r\n                }\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    });\r\n}\r\n\r\nfunction mergeAppConfigWithDefaults(appConfig: AngularAppConfig, buildOptions: AngularBuildOptions) {\r\n    if (!appConfig) {\r\n        return;\r\n    }\r\n\r\n    appConfig.scripts = appConfig.scripts || ([] as string[]);\r\n    appConfig.styles = appConfig.styles || ([] as string[]);\r\n    appConfig.dllOutChunkName = appConfig.dllOutChunkName || 'vendor';\r\n    if (appConfig.publicPath || appConfig.publicPath === '') {\r\n        appConfig.publicPath = /\\/$/.test(appConfig.publicPath) ? appConfig.publicPath : appConfig.publicPath + '/';\r\n    }\r\n    appConfig.htmlInjectOptions = appConfig.htmlInjectOptions || {};\r\n    appConfig.target = appConfig.target || 'web';\r\n\r\n    if (typeof appConfig.referenceDll === 'undefined' || appConfig.referenceDll === null) {\r\n        appConfig.referenceDll = !buildOptions.production && !buildOptions.aot && appConfig.dlls && appConfig.dlls.length > 0;\r\n    }\r\n    if (typeof appConfig.skipCopyAssets === 'undefined' || appConfig.skipCopyAssets === null) {\r\n      appConfig.skipCopyAssets = !buildOptions.dll && !buildOptions.production && appConfig.referenceDll;\r\n    }\r\n    if (typeof appConfig.skipGenerateIcons === 'undefined' || appConfig.skipGenerateIcons === null) {\r\n      appConfig.skipGenerateIcons = !buildOptions.dll && !buildOptions.production && appConfig.referenceDll;\r\n    }\r\n    if (typeof appConfig.sourceMap === 'undefined' || appConfig.sourceMap === null) {\r\n        appConfig.sourceMap = !buildOptions.production;\r\n    }\r\n    if (typeof appConfig.compressAssets === 'undefined' || appConfig.compressAssets === null) {\r\n        appConfig.compressAssets = buildOptions.production;\r\n    }\r\n    if (typeof appConfig.appendVersionHash === 'undefined' || appConfig.appendVersionHash === null) {\r\n        // is asp.net\r\n        appConfig.appendVersionHash = buildOptions.production;\r\n        if (appConfig.htmlInjectOptions &&\r\n            appConfig.htmlInjectOptions.customTagAttributes &&\r\n            // ReSharper disable once CoercedEqualsUsing\r\n            appConfig.htmlInjectOptions.customTagAttributes\r\n                .find(c => (c.tagName === 'link' || c.tagName === 'script') &&\r\n                    c.attribute &&\r\n                    c.attribute['asp-append-version'] == true)) {\r\n            appConfig.appendVersionHash = false;\r\n        }\r\n    }\r\n}"]}